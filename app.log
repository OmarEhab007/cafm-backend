Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts
19:11:01,963 |-INFO in ch.qos.logback.classic.LoggerContext[default] - This is logback-classic version 1.5.7
19:11:01,965 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - Here is a list of configurators discovered as a service, by rank: 
19:11:01,965 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 -   org.springframework.boot.logging.logback.RootLogLevelConfigurator
19:11:01,965 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - They will be invoked in order until ExecutionStatus.DO_NOT_INVOKE_NEXT_IF_ANY is returned.
19:11:01,965 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - Constructed configurator of type class org.springframework.boot.logging.logback.RootLogLevelConfigurator
19:11:01,967 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - org.springframework.boot.logging.logback.RootLogLevelConfigurator.configure() call lasted 0 milliseconds. ExecutionStatus=INVOKE_NEXT_IF_ANY
19:11:01,968 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - Trying to configure with ch.qos.logback.classic.joran.SerializedModelConfigurator
19:11:01,968 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - Constructed configurator of type class ch.qos.logback.classic.joran.SerializedModelConfigurator
19:11:01,968 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.scmo]
19:11:01,969 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.scmo]
19:11:01,969 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - ch.qos.logback.classic.joran.SerializedModelConfigurator.configure() call lasted 1 milliseconds. ExecutionStatus=INVOKE_NEXT_IF_ANY
19:11:01,969 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - Trying to configure with ch.qos.logback.classic.util.DefaultJoranConfigurator
19:11:01,969 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - Constructed configurator of type class ch.qos.logback.classic.util.DefaultJoranConfigurator
19:11:01,969 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
19:11:01,970 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.xml]
19:11:01,970 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - ch.qos.logback.classic.util.DefaultJoranConfigurator.configure() call lasted 1 milliseconds. ExecutionStatus=INVOKE_NEXT_IF_ANY
19:11:01,970 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - Trying to configure with ch.qos.logback.classic.BasicConfigurator
19:11:01,970 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - Constructed configurator of type class ch.qos.logback.classic.BasicConfigurator
19:11:01,970 |-INFO in ch.qos.logback.classic.BasicConfigurator@1051817b - Setting up default configuration.
19:11:01,978 |-INFO in ch.qos.logback.classic.util.ContextInitializer@5a62b2a4 - ch.qos.logback.classic.BasicConfigurator.configure() call lasted 8 milliseconds. ExecutionStatus=NEUTRAL
19:11:02,212 |-INFO in ch.qos.logback.core.joran.spi.ConfigurationWatchList@35293c05 - URL [jar:nested:/Users/omar/Developer/CAFM/cafm-backend/target/cafm-backend-1.0.0.jar/!BOOT-INF/classes/!/logback-spring.xml] is not of type file
19:11:02,258 |-INFO in ch.qos.logback.core.joran.util.ConfigurationWatchListUtil@620aa4ea - Adding [jar:nested:/Users/omar/Developer/CAFM/cafm-backend/target/cafm-backend-1.0.0.jar/!BOOT-INF/lib/spring-boot-3.3.3.jar!/org/springframework/boot/logging/logback/defaults.xml] to configuration watch list.
19:11:02,258 |-INFO in ch.qos.logback.core.joran.spi.ConfigurationWatchList@35293c05 - URL [jar:nested:/Users/omar/Developer/CAFM/cafm-backend/target/cafm-backend-1.0.0.jar/!BOOT-INF/lib/spring-boot-3.3.3.jar!/org/springframework/boot/logging/logback/defaults.xml] is not of type file
19:11:02,261 |-WARN in ch.qos.logback.core.joran.action.ConversionRuleAction - [converterClass] attribute is deprecated and replaced by [class]. See element [conversionRule] near line 8
19:11:02,261 |-WARN in ch.qos.logback.core.joran.action.ConversionRuleAction - [converterClass] attribute is deprecated and replaced by [class]. See element [conversionRule] near line 9
19:11:02,261 |-WARN in ch.qos.logback.core.joran.action.ConversionRuleAction - [converterClass] attribute is deprecated and replaced by [class]. See element [conversionRule] near line 10
19:11:02,261 |-WARN in ch.qos.logback.core.joran.action.ConversionRuleAction - [converterClass] attribute is deprecated and replaced by [class]. See element [conversionRule] near line 11
19:11:02,261 |-WARN in ch.qos.logback.core.joran.action.ConversionRuleAction - [converterClass] attribute is deprecated and replaced by [class]. See element [conversionRule] near line 12
19:11:02,261 |-INFO in ch.qos.logback.core.model.processor.ConversionRuleModelHandler - registering conversion word applicationName with class [org.springframework.boot.logging.logback.ApplicationNameConverter]
19:11:02,261 |-INFO in ch.qos.logback.core.model.processor.ConversionRuleModelHandler - registering conversion word clr with class [org.springframework.boot.logging.logback.ColorConverter]
19:11:02,261 |-INFO in ch.qos.logback.core.model.processor.ConversionRuleModelHandler - registering conversion word correlationId with class [org.springframework.boot.logging.logback.CorrelationIdConverter]
19:11:02,261 |-INFO in ch.qos.logback.core.model.processor.ConversionRuleModelHandler - registering conversion word wex with class [org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter]
19:11:02,261 |-INFO in ch.qos.logback.core.model.processor.ConversionRuleModelHandler - registering conversion word wEx with class [org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter]
19:11:02,262 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "%d{yyyy-MM-dd HH:mm:ss} - %msg%n" substituted for "${CONSOLE_LOG_PATTERN:-%clr(%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd'T'HH:mm:ss.SSSXXX}}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr(%applicationName[%15.15t]){faint} %clr(${LOG_CORRELATION_PATTERN:-}){faint}%clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}"
19:11:02,262 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "UTF-8" substituted for "${CONSOLE_LOG_CHARSET:-${file.encoding:-UTF-8}}"
19:11:02,262 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "TRACE" substituted for "${CONSOLE_LOG_THRESHOLD:-TRACE}"
19:11:02,262 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n" substituted for "${FILE_LOG_PATTERN:-%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd'T'HH:mm:ss.SSSXXX}} ${LOG_LEVEL_PATTERN:-%5p} ${PID:- } --- %applicationName[%t] ${LOG_CORRELATION_PATTERN:-}%-40.40logger{39} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}"
19:11:02,262 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "UTF-8" substituted for "${FILE_LOG_CHARSET:-${file.encoding:-UTF-8}}"
19:11:02,262 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "TRACE" substituted for "${FILE_LOG_THRESHOLD:-TRACE}"
19:11:02,265 |-WARN in ch.qos.logback.core.model.processor.ImplicitModelHandler - Ignoring unknown property [jmxConfigurator] in [ch.qos.logback.classic.LoggerContext]
19:11:02,266 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.apache.catalina.startup.DigesterFactory] to ERROR
19:11:02,266 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating ERROR level on Logger[org.apache.catalina.startup.DigesterFactory] onto the JUL framework
19:11:02,266 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.apache.catalina.util.LifecycleBase] to ERROR
19:11:02,266 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating ERROR level on Logger[org.apache.catalina.util.LifecycleBase] onto the JUL framework
19:11:02,266 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.apache.coyote.http11.Http11NioProtocol] to WARN
19:11:02,266 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating WARN level on Logger[org.apache.coyote.http11.Http11NioProtocol] onto the JUL framework
19:11:02,266 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.apache.sshd.common.util.SecurityUtils] to WARN
19:11:02,266 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating WARN level on Logger[org.apache.sshd.common.util.SecurityUtils] onto the JUL framework
19:11:02,266 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.apache.tomcat.util.net.NioSelectorPool] to WARN
19:11:02,266 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating WARN level on Logger[org.apache.tomcat.util.net.NioSelectorPool] onto the JUL framework
19:11:02,266 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.eclipse.jetty.util.component.AbstractLifeCycle] to ERROR
19:11:02,266 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating ERROR level on Logger[org.eclipse.jetty.util.component.AbstractLifeCycle] onto the JUL framework
19:11:02,266 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.hibernate.validator.internal.util.Version] to WARN
19:11:02,266 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating WARN level on Logger[org.hibernate.validator.internal.util.Version] onto the JUL framework
19:11:02,266 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.springframework.boot.actuate.endpoint.jmx] to WARN
19:11:02,266 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating WARN level on Logger[org.springframework.boot.actuate.endpoint.jmx] onto the JUL framework
19:11:02,266 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [CONSOLE]
19:11:02,266 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
19:11:02,268 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(%5p) %clr(70244){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} [%X{correlationId:-}] %m%n%wEx" substituted for "%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} [%X{correlationId:-}] %m%n%wEx"
19:11:02,275 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [FILE]
19:11:02,275 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
19:11:02,276 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "logs/cafm-backend.log" substituted for "${LOG_FILE}.log"
19:11:02,277 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "logs/cafm-backend.%d{yyyy-MM-dd}.%i.log.gz" substituted for "${LOG_FILE}.%d{yyyy-MM-dd}.%i.log.gz"
19:11:02,281 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1296109622 - setting totalSizeCap to 1 GB
19:11:02,282 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1296109622 - Will use gz compression
19:11:02,282 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1296109622 - Will use the pattern logs/cafm-backend.%d{yyyy-MM-dd}.%i.log for the active file
19:11:02,294 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@7adbd080 - The date pattern is 'yyyy-MM-dd' from file name pattern 'logs/cafm-backend.%d{yyyy-MM-dd}.%i.log.gz'.
19:11:02,294 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@7adbd080 - Roll-over at midnight.
19:11:02,298 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@7adbd080 - Setting initial period to 2025-08-23T16:09:39.821Z
19:11:02,298 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@7adbd080 - SizeAndTimeBasedFNATP is deprecated. Use SizeAndTimeBasedRollingPolicy instead
19:11:02,298 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@7adbd080 - For more information see http://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedRollingPolicy
19:11:02,299 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1296109622 - Cleaning on start up
19:11:02,302 |-INFO in c.q.l.core.rolling.helper.TimeBasedArchiveRemover - first clean up after appender initialization
19:11:02,302 |-INFO in c.q.l.core.rolling.helper.TimeBasedArchiveRemover - Multiple periods, i.e. 32 periods, seem to have elapsed. This is expected at application start.
19:11:02,303 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: logs/cafm-backend.log
19:11:02,303 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [logs/cafm-backend.log]
19:11:02,303 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [ERROR_FILE]
19:11:02,303 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
19:11:02,303 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "logs/cafm-backend-error.log" substituted for "${LOG_FILE}-error.log"
19:11:02,304 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "logs/cafm-backend-error.%d{yyyy-MM-dd}.%i.log.gz" substituted for "${LOG_FILE}-error.%d{yyyy-MM-dd}.%i.log.gz"
19:11:02,304 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1103017075 - setting totalSizeCap to 500 MB
19:11:02,305 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1103017075 - Will use gz compression
19:11:02,305 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1103017075 - Will use the pattern logs/cafm-backend-error.%d{yyyy-MM-dd}.%i.log for the active file
19:11:02,305 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@560513ce - The date pattern is 'yyyy-MM-dd' from file name pattern 'logs/cafm-backend-error.%d{yyyy-MM-dd}.%i.log.gz'.
19:11:02,305 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@560513ce - Roll-over at midnight.
19:11:02,305 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@560513ce - Setting initial period to 2025-08-23T16:08:51.339Z
19:11:02,305 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@560513ce - SizeAndTimeBasedFNATP is deprecated. Use SizeAndTimeBasedRollingPolicy instead
19:11:02,305 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@560513ce - For more information see http://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedRollingPolicy
19:11:02,305 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[ERROR_FILE] - Active log file name: logs/cafm-backend-error.log
19:11:02,305 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[ERROR_FILE] - File property is set to [logs/cafm-backend-error.log]
19:11:02,305 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [SECURITY_AUDIT]
19:11:02,305 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
19:11:02,305 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "logs/cafm-backend-security.log" substituted for "${LOG_FILE}-security.log"
19:11:02,305 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "logs/cafm-backend-security.%d{yyyy-MM-dd}.%i.log.gz" substituted for "${LOG_FILE}-security.%d{yyyy-MM-dd}.%i.log.gz"
19:11:02,306 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@318794136 - setting totalSizeCap to 500 MB
19:11:02,306 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@318794136 - Will use gz compression
19:11:02,306 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@318794136 - Will use the pattern logs/cafm-backend-security.%d{yyyy-MM-dd}.%i.log for the active file
19:11:02,306 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@37fbe4a8 - The date pattern is 'yyyy-MM-dd' from file name pattern 'logs/cafm-backend-security.%d{yyyy-MM-dd}.%i.log.gz'.
19:11:02,306 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@37fbe4a8 - Roll-over at midnight.
19:11:02,306 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@37fbe4a8 - Setting initial period to 2025-08-23T16:07:51.695Z
19:11:02,306 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@37fbe4a8 - SizeAndTimeBasedFNATP is deprecated. Use SizeAndTimeBasedRollingPolicy instead
19:11:02,306 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@37fbe4a8 - For more information see http://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedRollingPolicy
19:11:02,306 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[SECURITY_AUDIT] - Active log file name: logs/cafm-backend-security.log
19:11:02,306 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[SECURITY_AUDIT] - File property is set to [logs/cafm-backend-security.log]
19:11:02,306 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [PERFORMANCE]
19:11:02,306 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
19:11:02,306 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "logs/cafm-backend-performance.log" substituted for "${LOG_FILE}-performance.log"
19:11:02,306 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "logs/cafm-backend-performance.%d{yyyy-MM-dd}.%i.log.gz" substituted for "${LOG_FILE}-performance.%d{yyyy-MM-dd}.%i.log.gz"
19:11:02,307 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@55755528 - setting totalSizeCap to 300 MB
19:11:02,307 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@55755528 - Will use gz compression
19:11:02,307 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@55755528 - Will use the pattern logs/cafm-backend-performance.%d{yyyy-MM-dd}.%i.log for the active file
19:11:02,307 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@7d373bcf - The date pattern is 'yyyy-MM-dd' from file name pattern 'logs/cafm-backend-performance.%d{yyyy-MM-dd}.%i.log.gz'.
19:11:02,307 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@7d373bcf - Roll-over at midnight.
19:11:02,307 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@7d373bcf - Setting initial period to 2025-08-22T00:32:02.647Z
19:11:02,307 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@7d373bcf - SizeAndTimeBasedFNATP is deprecated. Use SizeAndTimeBasedRollingPolicy instead
19:11:02,307 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@7d373bcf - For more information see http://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedRollingPolicy
19:11:02,307 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[PERFORMANCE] - Active log file name: logs/cafm-backend-performance.log
19:11:02,307 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[PERFORMANCE] - File property is set to [logs/cafm-backend-performance.log]
19:11:02,307 |-INFO in c.q.l.core.rolling.helper.TimeBasedArchiveRemover - No removal attempts were made.
19:11:02,307 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [ASYNC_FILE]
19:11:02,307 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
19:11:02,308 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [FILE] to ch.qos.logback.classic.AsyncAppender[ASYNC_FILE]
19:11:02,308 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_FILE] - Attaching appender named [FILE] to AsyncAppender.
19:11:02,309 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_FILE] - Setting discardingThreshold to 20
19:11:02,309 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [ASYNC_ERROR]
19:11:02,309 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
19:11:02,309 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [ERROR_FILE] to ch.qos.logback.classic.AsyncAppender[ASYNC_ERROR]
19:11:02,309 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_ERROR] - Attaching appender named [ERROR_FILE] to AsyncAppender.
19:11:02,309 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_ERROR] - Setting discardingThreshold to 0
19:11:02,309 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "DEBUG" substituted for "${LOG_LEVEL_APP}"
19:11:02,309 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [com.cafm.cafmbackend] to DEBUG
19:11:02,309 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating DEBUG level on Logger[com.cafm.cafmbackend] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting additivity of logger [com.cafm.cafmbackend] to false
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [CONSOLE] to Logger[com.cafm.cafmbackend]
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [ASYNC_FILE] to Logger[com.cafm.cafmbackend]
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [ASYNC_ERROR] to Logger[com.cafm.cafmbackend]
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [com.cafm.cafmbackend.security] to INFO
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating INFO level on Logger[com.cafm.cafmbackend.security] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting additivity of logger [com.cafm.cafmbackend.security] to false
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [SECURITY_AUDIT] to Logger[com.cafm.cafmbackend.security]
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [ASYNC_FILE] to Logger[com.cafm.cafmbackend.security]
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [com.cafm.cafmbackend.performance] to INFO
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating INFO level on Logger[com.cafm.cafmbackend.performance] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting additivity of logger [com.cafm.cafmbackend.performance] to false
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [PERFORMANCE] to Logger[com.cafm.cafmbackend.performance]
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [ASYNC_FILE] to Logger[com.cafm.cafmbackend.performance]
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.hibernate.SQL] to DEBUG
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating DEBUG level on Logger[org.hibernate.SQL] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting additivity of logger [org.hibernate.SQL] to false
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [CONSOLE] to Logger[org.hibernate.SQL]
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [ASYNC_FILE] to Logger[org.hibernate.SQL]
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.hibernate.type.descriptor.sql.BasicBinder] to TRACE
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating TRACE level on Logger[org.hibernate.type.descriptor.sql.BasicBinder] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting additivity of logger [org.hibernate.type.descriptor.sql.BasicBinder] to false
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [CONSOLE] to Logger[org.hibernate.type.descriptor.sql.BasicBinder]
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [ASYNC_FILE] to Logger[org.hibernate.type.descriptor.sql.BasicBinder]
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.springframework.web] to INFO
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating INFO level on Logger[org.springframework.web] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.springframework.security] to INFO
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating INFO level on Logger[org.springframework.security] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.springframework.boot.actuator] to INFO
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating INFO level on Logger[org.springframework.boot.actuator] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.springframework.security.web.FilterChainProxy] to DEBUG
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating DEBUG level on Logger[org.springframework.security.web.FilterChainProxy] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.springframework.security.web.authentication] to DEBUG
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating DEBUG level on Logger[org.springframework.security.web.authentication] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.springframework.security.web.access] to DEBUG
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating DEBUG level on Logger[org.springframework.security.web.access] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [io.micrometer] to INFO
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating INFO level on Logger[io.micrometer] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.apache.tomcat] to WARN
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating WARN level on Logger[org.apache.tomcat] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.apache.catalina] to WARN
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating WARN level on Logger[org.apache.catalina] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [com.zaxxer.hikari] to WARN
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating WARN level on Logger[com.zaxxer.hikari] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [redis.clients.jedis] to WARN
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating WARN level on Logger[redis.clients.jedis] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [io.lettuce.core] to WARN
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating WARN level on Logger[io.lettuce.core] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.LoggerModelHandler - Setting level of logger [org.flywaydb] to INFO
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating INFO level on Logger[org.flywaydb] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.ModelInterpretationContext@2db2dd9d - value "INFO" substituted for "${LOG_LEVEL_ROOT}"
19:11:02,310 |-INFO in ch.qos.logback.classic.model.processor.RootLoggerModelHandler - Setting level of ROOT logger to INFO
19:11:02,310 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@3174cb09 - Propagating INFO level on Logger[ROOT] onto the JUL framework
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [CONSOLE] to Logger[ROOT]
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [ASYNC_FILE] to Logger[ROOT]
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.AppenderRefModelHandler - Attaching appender named [ASYNC_ERROR] to Logger[ROOT]
19:11:02,310 |-INFO in ch.qos.logback.core.model.processor.DefaultProcessor@6d6bc158 - End of configuration.
19:11:02,310 |-INFO in org.springframework.boot.logging.logback.SpringBootJoranConfigurator@5dda6f9 - Registering current configuration as safe fallback point


  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.3.3)

2025-08-23 19:11:02.357  INFO 70244 --- [           main] c.c.cafmbackend.CafmBackendApplication   : [] Starting CafmBackendApplication v1.0.0 using Java 23.0.2 with PID 70244 (/Users/omar/Developer/CAFM/cafm-backend/target/cafm-backend-1.0.0.jar started by omar in /Users/omar/Developer/CAFM/cafm-backend)
2025-08-23 19:11:02.358 DEBUG 70244 --- [           main] c.c.cafmbackend.CafmBackendApplication   : [] Running with Spring Boot v3.3.3, Spring v6.1.12
2025-08-23 19:11:02.359  INFO 70244 --- [           main] c.c.cafmbackend.CafmBackendApplication   : [] The following 1 profile is active: "dev"
2025-08-23 19:11:02.846  INFO 70244 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : [] Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-23 19:11:02.846  INFO 70244 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : [] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-23 19:11:02.937  INFO 70244 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : [] Finished Spring Data repository scanning in 88 ms. Found 31 JPA repository interfaces.
2025-08-23 19:11:03.218  INFO 70244 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : [] Multiple Spring Data modules found, entering strict repository configuration mode
2025-08-23 19:11:03.219  INFO 70244 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : [] Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-08-23 19:11:03.236  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.InventoryCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.236  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.SchoolRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.237  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.237  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.AdminSupervisorRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.237  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.AssetCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.237  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.SupervisorSchoolRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.238  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.FCMTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.238  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.CompanyRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.238  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.SchoolAchievementRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.238  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.FileMetadataRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.238  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.SupervisorAttendanceRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.239  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.EmailVerificationTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.239  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.DamageCountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.239  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.AssetMaintenanceRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.239  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.ApiKeyRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.240  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.InventoryItemRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.240  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.InventoryTransactionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.240  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.TenantAwareUserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.240  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.241  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.WorkOrderTaskRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.241  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.NotificationRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.241  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.NotificationQueueRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.241  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.AssetRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.241  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.WorkOrderRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.241  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.SupervisorTechnicianRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.241  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.MaintenanceCountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.241  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.WorkOrderAttachmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.241  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.AuditLogRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.241  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.PasswordResetTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.242  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.WorkOrderMaterialRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.242  INFO 70244 --- [           main] .RepositoryConfigurationExtensionSupport : [] Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cafm.cafmbackend.data.repository.ReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-08-23 19:11:03.242  INFO 70244 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : [] Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.
2025-08-23 19:11:03.798  INFO 70244 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : [] Tomcat initialized with port 8080 (http)
2025-08-23 19:11:03.822  INFO 70244 --- [           main] w.s.c.ServletWebServerApplicationContext : [] Root WebApplicationContext: initialization completed in 1437 ms
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts
2025-08-23 19:11:04.400 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Scanning for classpath resources at 'classpath:db/callback' ...
2025-08-23 19:11:04.400 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Determining location urls for classpath:db/callback using ClassLoader TomcatEmbeddedWebappClassLoader
  context: ROOT
  delegate: true
----------> Parent Classloader:
org.springframework.boot.loader.launch.LaunchedClassLoader@16b98e56
 ...
2025-08-23 19:11:04.400 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Unable to resolve location classpath:db/callback.
2025-08-23 19:11:04.400 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Scanning for classpath resources at 'classpath:db/migration' ...
2025-08-23 19:11:04.400 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Determining location urls for classpath:db/migration using ClassLoader TomcatEmbeddedWebappClassLoader
  context: ROOT
  delegate: true
----------> Parent Classloader:
org.springframework.boot.loader.launch.LaunchedClassLoader@16b98e56
 ...
2025-08-23 19:11:04.401 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Scanning URL: jar:nested:/Users/omar/Developer/CAFM/cafm-backend/target/cafm-backend-1.0.0.jar/!BOOT-INF/classes/!/db/migration
2025-08-23 19:11:04.402 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/
2025-08-23 19:11:04.402 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V100__Fix_Admin_Password.sql
2025-08-23 19:11:04.402 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V101__Debug_Admin_Password.sql
2025-08-23 19:11:04.402 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V102__Fix_Admin_User_Type.sql
2025-08-23 19:11:04.402 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V103__Generate_New_Hash.sql
2025-08-23 19:11:04.402 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V104__Add_Super_Admin_Role.sql
2025-08-23 19:11:04.402 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V105__Fix_Company_Status_Enum_Values.sql
2025-08-23 19:11:04.402 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V106__Fix_User_Status_Enum_Simple.sql
2025-08-23 19:11:04.402 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V107__Fix_All_Enum_Types_Comprehensive.sql
2025-08-23 19:11:04.402 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V108__Email_Verification_System.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V109__Password_Reset_Tokens.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V10__Add_Technician_Specialization.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V110__Add_Audit_Columns_To_Tokens.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V111__Performance_Indexes.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V112__Security_Tables.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V113__add_user_security_fields.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V114__fix_users_history_table.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V115__Create_Core_Missing_Enums_And_WorkOrders.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V116__Create_Asset_Management_Tables.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V117__Create_WorkOrder_Supporting_Tables.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V118__Create_Inventory_Management_Tables.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V119__Create_Notifications_And_User_Management_Tables.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V11__Create_Supervisor_Technician_Table.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V120__Final_Performance_Optimization_And_Validation.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V121__Add_last_login_ip_column.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V122__Add_test_assets_inventory.sql
2025-08-23 19:11:04.403 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V123__Add_soft_delete_columns.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V124__Fix_asset_categories_columns.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V125__Fix_inventory_categories_columns.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V126__add_performance_indexes.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V12__Create_Admin_Supervisor_Table.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V13__Add_Multi_Tenant_Foundation.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V14__Database_Optimization_Phase1.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V15__Update_Views_For_Multi_Tenancy.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V16__Create_Or_Update_Maintenance_Counts_Table.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V17__Create_Damage_Counts_Table.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V18__Create_School_Achievements_Table.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V19__Create_Notification_Queue_Table.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V1__Initial_Schema.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V200__Add_CompanyId_To_All_Tables.sql.disabled
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V201__Fix_Multi_Tenant_Constraints.sql.disabled
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V20__Update_Reports_Table_Completion_Workflow.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V21__Add_Missing_Audit_Columns.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V22__Add_Audit_Columns_To_Roles_Table.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V2__Update_Schema_From_Supabase.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V3__Unified_User_Management.sql
2025-08-23 19:11:04.404 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V4__Normalize_JSONB_Fields.sql
2025-08-23 19:11:04.405 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V5__Performance_Optimizations.sql
2025-08-23 19:11:04.405 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V6__Data_Integrity_Improvements.sql
2025-08-23 19:11:04.405 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V7__Comprehensive_Audit_System.sql
2025-08-23 19:11:04.405 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V8__Soft_Delete_Implementation.sql
2025-08-23 19:11:04.405 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V99__Update_Admin_Password.sql
2025-08-23 19:11:04.405 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Found resource: db/migration/V9__Advanced_Features.sql
2025-08-23 19:11:04.405 DEBUG 70244 --- [           main] o.f.c.i.s.classpath.ClassPathScanner     : [] Scanning for classes at classpath:db/migration
2025-08-23 19:11:04.407 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V201__Fix_Multi_Tenant_Constraints.sql.disabled (filename: V201__Fix_Multi_Tenant_Constraints.sql.disabled)
2025-08-23 19:11:04.407 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V200__Add_CompanyId_To_All_Tables.sql.disabled (filename: V200__Add_CompanyId_To_All_Tables.sql.disabled)
2025-08-23 19:11:04.407 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/ (filename: )
2025-08-23 19:11:04.407 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V99__Update_Admin_Password.sql
2025-08-23 19:11:04.421 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V124__Fix_asset_categories_columns.sql
2025-08-23 19:11:04.422 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V22__Add_Audit_Columns_To_Roles_Table.sql
2025-08-23 19:11:04.422 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V12__Create_Admin_Supervisor_Table.sql
2025-08-23 19:11:04.422 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V3__Unified_User_Management.sql
2025-08-23 19:11:04.422 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V113__add_user_security_fields.sql
2025-08-23 19:11:04.422 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V19__Create_Notification_Queue_Table.sql
2025-08-23 19:11:04.422 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V20__Update_Reports_Table_Completion_Workflow.sql
2025-08-23 19:11:04.422 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V10__Add_Technician_Specialization.sql
2025-08-23 19:11:04.422 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V17__Create_Damage_Counts_Table.sql
2025-08-23 19:11:04.422 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V115__Create_Core_Missing_Enums_And_WorkOrders.sql
2025-08-23 19:11:04.422 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V120__Final_Performance_Optimization_And_Validation.sql
2025-08-23 19:11:04.422 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V125__Fix_inventory_categories_columns.sql
2025-08-23 19:11:04.422 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V118__Create_Inventory_Management_Tables.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V126__add_performance_indexes.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V102__Fix_Admin_User_Type.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V117__Create_WorkOrder_Supporting_Tables.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V6__Data_Integrity_Improvements.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V18__Create_School_Achievements_Table.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V11__Create_Supervisor_Technician_Table.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V119__Create_Notifications_And_User_Management_Tables.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V122__Add_test_assets_inventory.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V8__Soft_Delete_Implementation.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V111__Performance_Indexes.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V9__Advanced_Features.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V1__Initial_Schema.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V116__Create_Asset_Management_Tables.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V114__fix_users_history_table.sql
2025-08-23 19:11:04.423 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V110__Add_Audit_Columns_To_Tokens.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V121__Add_last_login_ip_column.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V13__Add_Multi_Tenant_Foundation.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V100__Fix_Admin_Password.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V21__Add_Missing_Audit_Columns.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V106__Fix_User_Status_Enum_Simple.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V123__Add_soft_delete_columns.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V105__Fix_Company_Status_Enum_Values.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V15__Update_Views_For_Multi_Tenancy.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V112__Security_Tables.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V103__Generate_New_Hash.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V104__Add_Super_Admin_Role.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V4__Normalize_JSONB_Fields.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V16__Create_Or_Update_Maintenance_Counts_Table.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V101__Debug_Admin_Password.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V2__Update_Schema_From_Supabase.sql
2025-08-23 19:11:04.424 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V14__Database_Optimization_Phase1.sql
2025-08-23 19:11:04.425 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V7__Comprehensive_Audit_System.sql
2025-08-23 19:11:04.425 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V107__Fix_All_Enum_Types_Comprehensive.sql
2025-08-23 19:11:04.425 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V109__Password_Reset_Tokens.sql
2025-08-23 19:11:04.425 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V5__Performance_Optimizations.sql
2025-08-23 19:11:04.425 DEBUG 70244 --- [           main] o.f.c.i.resource.ResourceNameValidator   : [] Validating V108__Email_Verification_System.sql
2025-08-23 19:11:04.429 DEBUG 70244 --- [           main] o.f.c.i.database.DatabaseTypeRegister    : [] Multiple databases found that handle url 'jdbc:postgresql://localhost:5432/cafm_db': CockroachDB,PostgreSQL
2025-08-23 19:11:04.429  INFO 70244 --- [           main] org.flywaydb.core.FlywayExecutor         : [] Database: jdbc:postgresql://localhost:5432/cafm_db (PostgreSQL 15.13)
2025-08-23 19:11:04.429 DEBUG 70244 --- [           main] org.flywaydb.core.FlywayExecutor         : [] Database Type: PostgreSQL
2025-08-23 19:11:04.429 DEBUG 70244 --- [           main] org.flywaydb.core.FlywayExecutor         : [] Driver: PostgreSQL JDBC Driver 42.7.3
2025-08-23 19:11:04.430 DEBUG 70244 --- [           main] org.flywaydb.core.FlywayExecutor         : [] DDL Transactions Supported: true
2025-08-23 19:11:04.430 DEBUG 70244 --- [           main] o.f.c.i.s.SchemaHistoryFactory           : [] Schemas: public
2025-08-23 19:11:04.430 DEBUG 70244 --- [           main] o.f.c.i.s.SchemaHistoryFactory           : [] Default schema: null
2025-08-23 19:11:04.441 DEBUG 70244 --- [           main] o.f.c.i.c.SqlScriptCallbackFactory       : [] Scanning for SQL callbacks ...
2025-08-23 19:11:04.442 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V201__Fix_Multi_Tenant_Constraints.sql.disabled (filename: V201__Fix_Multi_Tenant_Constraints.sql.disabled)
2025-08-23 19:11:04.442 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V200__Add_CompanyId_To_All_Tables.sql.disabled (filename: V200__Add_CompanyId_To_All_Tables.sql.disabled)
2025-08-23 19:11:04.442 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/ (filename: )
2025-08-23 19:11:04.446 DEBUG 70244 --- [           main] o.f.core.internal.command.DbValidate     : [] Validating migrations ...
2025-08-23 19:11:04.448 DEBUG 70244 --- [           main] o.f.c.a.c.ClassicConfiguration           : [] CherryPickConfigurationExtension not found
2025-08-23 19:11:04.449 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V201__Fix_Multi_Tenant_Constraints.sql.disabled (filename: V201__Fix_Multi_Tenant_Constraints.sql.disabled)
2025-08-23 19:11:04.449 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V200__Add_CompanyId_To_All_Tables.sql.disabled (filename: V200__Add_CompanyId_To_All_Tables.sql.disabled)
2025-08-23 19:11:04.449 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/ (filename: )
2025-08-23 19:11:04.461 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V99__Update_Admin_Password.sql (filename: V99__Update_Admin_Password.sql)
2025-08-23 19:11:04.461 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V124__Fix_asset_categories_columns.sql (filename: V124__Fix_asset_categories_columns.sql)
2025-08-23 19:11:04.461 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V22__Add_Audit_Columns_To_Roles_Table.sql (filename: V22__Add_Audit_Columns_To_Roles_Table.sql)
2025-08-23 19:11:04.461 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V12__Create_Admin_Supervisor_Table.sql (filename: V12__Create_Admin_Supervisor_Table.sql)
2025-08-23 19:11:04.461 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V3__Unified_User_Management.sql (filename: V3__Unified_User_Management.sql)
2025-08-23 19:11:04.461 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V113__add_user_security_fields.sql (filename: V113__add_user_security_fields.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V19__Create_Notification_Queue_Table.sql (filename: V19__Create_Notification_Queue_Table.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V20__Update_Reports_Table_Completion_Workflow.sql (filename: V20__Update_Reports_Table_Completion_Workflow.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V10__Add_Technician_Specialization.sql (filename: V10__Add_Technician_Specialization.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V17__Create_Damage_Counts_Table.sql (filename: V17__Create_Damage_Counts_Table.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V115__Create_Core_Missing_Enums_And_WorkOrders.sql (filename: V115__Create_Core_Missing_Enums_And_WorkOrders.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V120__Final_Performance_Optimization_And_Validation.sql (filename: V120__Final_Performance_Optimization_And_Validation.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V125__Fix_inventory_categories_columns.sql (filename: V125__Fix_inventory_categories_columns.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V118__Create_Inventory_Management_Tables.sql (filename: V118__Create_Inventory_Management_Tables.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V126__add_performance_indexes.sql (filename: V126__add_performance_indexes.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V102__Fix_Admin_User_Type.sql (filename: V102__Fix_Admin_User_Type.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V117__Create_WorkOrder_Supporting_Tables.sql (filename: V117__Create_WorkOrder_Supporting_Tables.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V6__Data_Integrity_Improvements.sql (filename: V6__Data_Integrity_Improvements.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V18__Create_School_Achievements_Table.sql (filename: V18__Create_School_Achievements_Table.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V201__Fix_Multi_Tenant_Constraints.sql.disabled (filename: V201__Fix_Multi_Tenant_Constraints.sql.disabled)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V11__Create_Supervisor_Technician_Table.sql (filename: V11__Create_Supervisor_Technician_Table.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V119__Create_Notifications_And_User_Management_Tables.sql (filename: V119__Create_Notifications_And_User_Management_Tables.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V122__Add_test_assets_inventory.sql (filename: V122__Add_test_assets_inventory.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V8__Soft_Delete_Implementation.sql (filename: V8__Soft_Delete_Implementation.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V111__Performance_Indexes.sql (filename: V111__Performance_Indexes.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V9__Advanced_Features.sql (filename: V9__Advanced_Features.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V1__Initial_Schema.sql (filename: V1__Initial_Schema.sql)
2025-08-23 19:11:04.462 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V116__Create_Asset_Management_Tables.sql (filename: V116__Create_Asset_Management_Tables.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V114__fix_users_history_table.sql (filename: V114__fix_users_history_table.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V110__Add_Audit_Columns_To_Tokens.sql (filename: V110__Add_Audit_Columns_To_Tokens.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V121__Add_last_login_ip_column.sql (filename: V121__Add_last_login_ip_column.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V200__Add_CompanyId_To_All_Tables.sql.disabled (filename: V200__Add_CompanyId_To_All_Tables.sql.disabled)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V13__Add_Multi_Tenant_Foundation.sql (filename: V13__Add_Multi_Tenant_Foundation.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V100__Fix_Admin_Password.sql (filename: V100__Fix_Admin_Password.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V21__Add_Missing_Audit_Columns.sql (filename: V21__Add_Missing_Audit_Columns.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V106__Fix_User_Status_Enum_Simple.sql (filename: V106__Fix_User_Status_Enum_Simple.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V123__Add_soft_delete_columns.sql (filename: V123__Add_soft_delete_columns.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V105__Fix_Company_Status_Enum_Values.sql (filename: V105__Fix_Company_Status_Enum_Values.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V15__Update_Views_For_Multi_Tenancy.sql (filename: V15__Update_Views_For_Multi_Tenancy.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V112__Security_Tables.sql (filename: V112__Security_Tables.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V103__Generate_New_Hash.sql (filename: V103__Generate_New_Hash.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V104__Add_Super_Admin_Role.sql (filename: V104__Add_Super_Admin_Role.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V4__Normalize_JSONB_Fields.sql (filename: V4__Normalize_JSONB_Fields.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V16__Create_Or_Update_Maintenance_Counts_Table.sql (filename: V16__Create_Or_Update_Maintenance_Counts_Table.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/ (filename: )
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V101__Debug_Admin_Password.sql (filename: V101__Debug_Admin_Password.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V2__Update_Schema_From_Supabase.sql (filename: V2__Update_Schema_From_Supabase.sql)
2025-08-23 19:11:04.463 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V14__Database_Optimization_Phase1.sql (filename: V14__Database_Optimization_Phase1.sql)
2025-08-23 19:11:04.464 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V7__Comprehensive_Audit_System.sql (filename: V7__Comprehensive_Audit_System.sql)
2025-08-23 19:11:04.464 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V107__Fix_All_Enum_Types_Comprehensive.sql (filename: V107__Fix_All_Enum_Types_Comprehensive.sql)
2025-08-23 19:11:04.464 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V109__Password_Reset_Tokens.sql (filename: V109__Password_Reset_Tokens.sql)
2025-08-23 19:11:04.464 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V5__Performance_Optimizations.sql (filename: V5__Performance_Optimizations.sql)
2025-08-23 19:11:04.464 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V108__Email_Verification_System.sql (filename: V108__Email_Verification_System.sql)
2025-08-23 19:11:04.464 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V99__Update_Admin_Password.sql (filename: V99__Update_Admin_Password.sql)
2025-08-23 19:11:04.464 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V124__Fix_asset_categories_columns.sql (filename: V124__Fix_asset_categories_columns.sql)
2025-08-23 19:11:04.464 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V22__Add_Audit_Columns_To_Roles_Table.sql (filename: V22__Add_Audit_Columns_To_Roles_Table.sql)
2025-08-23 19:11:04.464 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V12__Create_Admin_Supervisor_Table.sql (filename: V12__Create_Admin_Supervisor_Table.sql)
2025-08-23 19:11:04.464 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V3__Unified_User_Management.sql (filename: V3__Unified_User_Management.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V113__add_user_security_fields.sql (filename: V113__add_user_security_fields.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V19__Create_Notification_Queue_Table.sql (filename: V19__Create_Notification_Queue_Table.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V20__Update_Reports_Table_Completion_Workflow.sql (filename: V20__Update_Reports_Table_Completion_Workflow.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V10__Add_Technician_Specialization.sql (filename: V10__Add_Technician_Specialization.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V17__Create_Damage_Counts_Table.sql (filename: V17__Create_Damage_Counts_Table.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V115__Create_Core_Missing_Enums_And_WorkOrders.sql (filename: V115__Create_Core_Missing_Enums_And_WorkOrders.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V120__Final_Performance_Optimization_And_Validation.sql (filename: V120__Final_Performance_Optimization_And_Validation.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V125__Fix_inventory_categories_columns.sql (filename: V125__Fix_inventory_categories_columns.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V118__Create_Inventory_Management_Tables.sql (filename: V118__Create_Inventory_Management_Tables.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V126__add_performance_indexes.sql (filename: V126__add_performance_indexes.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V102__Fix_Admin_User_Type.sql (filename: V102__Fix_Admin_User_Type.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V117__Create_WorkOrder_Supporting_Tables.sql (filename: V117__Create_WorkOrder_Supporting_Tables.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V6__Data_Integrity_Improvements.sql (filename: V6__Data_Integrity_Improvements.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V18__Create_School_Achievements_Table.sql (filename: V18__Create_School_Achievements_Table.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V201__Fix_Multi_Tenant_Constraints.sql.disabled (filename: V201__Fix_Multi_Tenant_Constraints.sql.disabled)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V11__Create_Supervisor_Technician_Table.sql (filename: V11__Create_Supervisor_Technician_Table.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V119__Create_Notifications_And_User_Management_Tables.sql (filename: V119__Create_Notifications_And_User_Management_Tables.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V122__Add_test_assets_inventory.sql (filename: V122__Add_test_assets_inventory.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V8__Soft_Delete_Implementation.sql (filename: V8__Soft_Delete_Implementation.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V111__Performance_Indexes.sql (filename: V111__Performance_Indexes.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V9__Advanced_Features.sql (filename: V9__Advanced_Features.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V1__Initial_Schema.sql (filename: V1__Initial_Schema.sql)
2025-08-23 19:11:04.465 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V116__Create_Asset_Management_Tables.sql (filename: V116__Create_Asset_Management_Tables.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V114__fix_users_history_table.sql (filename: V114__fix_users_history_table.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V110__Add_Audit_Columns_To_Tokens.sql (filename: V110__Add_Audit_Columns_To_Tokens.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V121__Add_last_login_ip_column.sql (filename: V121__Add_last_login_ip_column.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V200__Add_CompanyId_To_All_Tables.sql.disabled (filename: V200__Add_CompanyId_To_All_Tables.sql.disabled)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V13__Add_Multi_Tenant_Foundation.sql (filename: V13__Add_Multi_Tenant_Foundation.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V100__Fix_Admin_Password.sql (filename: V100__Fix_Admin_Password.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V21__Add_Missing_Audit_Columns.sql (filename: V21__Add_Missing_Audit_Columns.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V106__Fix_User_Status_Enum_Simple.sql (filename: V106__Fix_User_Status_Enum_Simple.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V123__Add_soft_delete_columns.sql (filename: V123__Add_soft_delete_columns.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V105__Fix_Company_Status_Enum_Values.sql (filename: V105__Fix_Company_Status_Enum_Values.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V15__Update_Views_For_Multi_Tenancy.sql (filename: V15__Update_Views_For_Multi_Tenancy.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V112__Security_Tables.sql (filename: V112__Security_Tables.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V103__Generate_New_Hash.sql (filename: V103__Generate_New_Hash.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V104__Add_Super_Admin_Role.sql (filename: V104__Add_Super_Admin_Role.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V4__Normalize_JSONB_Fields.sql (filename: V4__Normalize_JSONB_Fields.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V16__Create_Or_Update_Maintenance_Counts_Table.sql (filename: V16__Create_Or_Update_Maintenance_Counts_Table.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/ (filename: )
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V101__Debug_Admin_Password.sql (filename: V101__Debug_Admin_Password.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V2__Update_Schema_From_Supabase.sql (filename: V2__Update_Schema_From_Supabase.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V14__Database_Optimization_Phase1.sql (filename: V14__Database_Optimization_Phase1.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V7__Comprehensive_Audit_System.sql (filename: V7__Comprehensive_Audit_System.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V107__Fix_All_Enum_Types_Comprehensive.sql (filename: V107__Fix_All_Enum_Types_Comprehensive.sql)
2025-08-23 19:11:04.466 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V109__Password_Reset_Tokens.sql (filename: V109__Password_Reset_Tokens.sql)
2025-08-23 19:11:04.467 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V5__Performance_Optimizations.sql (filename: V5__Performance_Optimizations.sql)
2025-08-23 19:11:04.467 DEBUG 70244 --- [           main] o.f.core.internal.scanner.Scanner        : [] Filtering out resource: db/migration/V108__Email_Verification_System.sql (filename: V108__Email_Verification_System.sql)
2025-08-23 19:11:04.481  INFO 70244 --- [           main] o.f.core.internal.command.DbValidate     : [] Successfully validated 50 migrations (execution time 00:00.034s)
2025-08-23 19:11:04.483 DEBUG 70244 --- [           main] o.f.core.internal.command.DbSchemas      : [] Skipping creation of existing schema: "public"
2025-08-23 19:11:04.492 DEBUG 70244 --- [           main] o.f.c.a.c.ClassicConfiguration           : [] CherryPickConfigurationExtension not found
2025-08-23 19:11:04.494  INFO 70244 --- [           main] o.f.core.internal.command.DbMigrate      : [] Current version of schema "public": 126
2025-08-23 19:11:04.496  INFO 70244 --- [           main] o.f.core.internal.command.DbMigrate      : [] Schema "public" is up to date. No migration necessary.
2025-08-23 19:11:04.500 DEBUG 70244 --- [           main] org.flywaydb.core.FlywayExecutor         : [] Memory usage: 90 of 152M
2025-08-23 19:11:04.859  INFO 70244 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : [] No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-23 19:11:05.846  INFO 70244 --- [           main] j.LocalContainerEntityManagerFactoryBean : [] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-23 19:11:06.043  INFO 70244 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : [] Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-23 19:11:06.727 DEBUG 70244 --- [           main] o.s.w.f.ServerHttpObservationFilter      : [] Filter 'webMvcObservationFilter' configured for use
2025-08-23 19:11:06.727 DEBUG 70244 --- [           main] o.s.web.filter.ShallowEtagHeaderFilter   : [] Filter 'shallowEtagHeaderFilter' configured for use
2025-08-23 19:11:07.412  INFO 70244 --- [           main] c.cafm.cafmbackend.config.MinioConfig    : [] MinIO client configured successfully - Endpoint: http://localhost:9000
2025-08-23 19:11:07.606  INFO 70244 --- [           main] c.c.c.service.FileUploadService          : [] MinIO buckets initialized successfully
2025-08-23 19:11:07.959  INFO 70244 --- [           main] eAuthenticationProviderManagerConfigurer : [] Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-08-23 19:11:07.960  WARN 70244 --- [           main] r$InitializeUserDetailsManagerConfigurer : [] Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-08-23 19:11:07.992  INFO 70244 --- [           main] c.cafm.cafmbackend.config.AsyncConfig    : [] Configured default async executor with core pool size: 10, max pool size: 50, queue capacity: 500
2025-08-23 19:11:07.999  INFO 70244 --- [           main] c.cafm.cafmbackend.config.AsyncConfig    : [] Configured I/O task executor with virtual threads
2025-08-23 19:11:08.003  INFO 70244 --- [           main] c.cafm.cafmbackend.config.AsyncConfig    : [] Configured computation executor with 12 threads
2025-08-23 19:11:08.005  INFO 70244 --- [           main] c.cafm.cafmbackend.config.AsyncConfig    : [] Configured database task executor with limited concurrency
2025-08-23 19:11:08.007  INFO 70244 --- [           main] c.cafm.cafmbackend.config.AsyncConfig    : [] Configured notification executor with virtual threads
2025-08-23 19:11:08.007  INFO 70244 --- [           main] c.cafm.cafmbackend.config.AsyncConfig    : [] Configured scheduled task executor
2025-08-23 19:11:08.261 DEBUG 70244 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : [] 180 mappings in 'requestMappingHandlerMapping'
2025-08-23 19:11:08.281 DEBUG 70244 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : [] Patterns [/webjars/**, /**, /static/**, /images/**, /swagger-ui/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-08-23 19:11:08.396  INFO 70244 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : [] Exposing 16 endpoints beneath base path '/actuator'
2025-08-23 19:11:08.437 DEBUG 70244 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : [] Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, AuthenticationRateLimitFilter, JwtAuthenticationFilter, TenantSecurityFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-08-23 19:11:08.508 DEBUG 70244 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : [] ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-08-23 19:11:08.534 DEBUG 70244 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : [] ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-08-23 19:11:08.838 DEBUG 70244 --- [           main] o.s.d.r.l.RedisMessageListenerContainer  : [] Starting RedisMessageListenerContainer...
2025-08-23 19:11:08.839 DEBUG 70244 --- [           main] o.s.d.r.l.RedisMessageListenerContainer  : [] Postpone listening for Redis messages until actual listeners are added
2025-08-23 19:11:08.894  INFO 70244 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : [] Tomcat started on port 8080 (http) with context path '/'
2025-08-23 19:11:08.903  INFO 70244 --- [           main] c.c.cafmbackend.CafmBackendApplication   : [] Started CafmBackendApplication in 6.863 seconds (process running for 7.156)
2025-08-23 19:11:33.143  INFO 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] Initializing Servlet 'dispatcherServlet'
2025-08-23 19:11:33.143 DEBUG 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] Detected StandardServletMultipartResolver
2025-08-23 19:11:33.143 DEBUG 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] Detected AcceptHeaderLocaleResolver
2025-08-23 19:11:33.143 DEBUG 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] Detected FixedThemeResolver
2025-08-23 19:11:33.144 DEBUG 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@157fe186
2025-08-23 19:11:33.144 DEBUG 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] Detected org.springframework.web.servlet.support.SessionFlashMapManager@3e419d4d
2025-08-23 19:11:33.144 DEBUG 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-08-23 19:11:33.144  INFO 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] Completed initialization in 1 ms
2025-08-23 19:11:33.167 DEBUG 70244 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : [] Securing GET /actuator/health
2025-08-23 19:11:33.173 DEBUG 70244 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:11:33.175 DEBUG 70244 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : [] Secured GET /actuator/health
2025-08-23 19:11:33.177 DEBUG 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] GET "/actuator/health", parameters={}
2025-08-23 19:11:33.189 DEBUG 70244 --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/octet-stream" to []
2025-08-23 19:11:33.233 DEBUG 70244 --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/vnd.spring-boot.actuator.v3+json', given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-08-23 19:11:33.237 DEBUG 70244 --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [org.springframework.boot.actuate.health.SystemHealth@60ed15a0]
2025-08-23 19:11:33.246 DEBUG 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:11:48.602 DEBUG 70244 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/auth/login
2025-08-23 19:11:48.603 DEBUG 70244 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:11:48.603 DEBUG 70244 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/auth/login
2025-08-23 19:11:48.604 DEBUG 70244 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:11:48.604 DEBUG 70244 --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:11:48.614 DEBUG 70244 --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:11:48.631  INFO 70244 --- [nio-8080-exec-2] c.c.c.api.controllers.AuthController     : [] Login attempt for email: admin@cafm.local
2025-08-23 19:11:48.636  INFO 70244 --- [nio-8080-exec-2] c.cafm.cafmbackend.service.AuthService   : [] Login attempt for email: admin@cafm.local
2025-08-23 19:11:48.681 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:11:48.725 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:11:48.803 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:11:48.854 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:11:48.868  INFO 70244 --- [nio-8080-exec-2] SECURITY_AUDIT                           : [] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:11:48.868933 - Details: Login successful
2025-08-23 19:11:48.869  INFO 70244 --- [nio-8080-exec-2] c.c.c.api.controllers.AuthController     : [] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:11:48.873 DEBUG 70244 --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:11:48.876 DEBUG 70244 --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:11:48.877 DEBUG 70244 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:11:48.888 DEBUG 70244 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/users
2025-08-23 19:11:48.920 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:11:48.926 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:11:48.932 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:11:48.935 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:11:48.948 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:11:48.953 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:11:48.955 DEBUG 70244 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/users
2025-08-23 19:11:48.956 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:11:48.959 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:11:48.959 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:11:48.960 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:11:48.961  INFO 70244 --- [nio-8080-exec-3] SECURITY                                 : [] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=POST, uri=/api/v1/users
2025-08-23 19:11:48.961 DEBUG 70244 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/users", parameters={}
2025-08-23 19:11:48.961 DEBUG 70244 --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.UserController#createUser(UserCreateRequest, UserDetails)
2025-08-23 19:11:48.968 DEBUG 70244 --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [UserCreateRequest[email=successuser@cafm.com, password=SecurePass123@, firstName=Success, lastName=U (truncated)...]
2025-08-23 19:11:48.976 DEBUG 70244 --- [nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : [] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cafm.cafmbackend.api.controllers.UserController.createUser(com.cafm.cafmbackend.dto.user.UserCreateRequest,org.springframework.security.core.userdetails.UserDetails); target is of class [com.cafm.cafmbackend.api.controllers.UserController]
2025-08-23 19:11:48.988 DEBUG 70244 --- [nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : [] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cafm.cafmbackend.api.controllers.UserController.createUser(com.cafm.cafmbackend.dto.user.UserCreateRequest,org.springframework.security.core.userdetails.UserDetails); target is of class [com.cafm.cafmbackend.api.controllers.UserController]
2025-08-23 19:11:48.988  INFO 70244 --- [nio-8080-exec-3] c.c.c.api.controllers.UserController     : [] Create user request for email: successuser@cafm.com by admin: admin@cafm.local
2025-08-23 19:11:48.989  INFO 70244 --- [nio-8080-exec-3] c.cafm.cafmbackend.service.UserService   : [] Creating new user with email: successuser@cafm.com
2025-08-23 19:11:48.990 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?) 
    fetch
        first ? rows only
Hibernate: 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?) 
    fetch
        first ? rows only
2025-08-23 19:11:48.993 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        upper(u1_0.username)=upper(?) 
    fetch
        first ? rows only
Hibernate: 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        upper(u1_0.username)=upper(?) 
    fetch
        first ? rows only
2025-08-23 19:11:48.995 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:11:49.070 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.d.e.base.TenantEntityListener      : [] Pre-persist tenant validation for entity: User
2025-08-23 19:11:49.070 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.d.e.base.TenantEntityListener      : [] Skipping tenant validation for system operation: CREATE
2025-08-23 19:11:49.070  INFO 70244 --- [nio-8080-exec-3] c.c.c.d.e.base.TenantEntityListener      : [] SECURITY_AUDIT: operation=CREATE, entity=User, entityTenant=00000000-0000-0000-0000-000000000001, currentTenant=null, result=SUCCESS
2025-08-23 19:11:49.073  INFO 70244 --- [nio-8080-exec-3] c.cafm.cafmbackend.service.UserService   : [] Created user with ID: ca608050-50aa-4ed0-83fd-4aa9b918caf9
2025-08-23 19:11:49.083 DEBUG 70244 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : [] Using @ExceptionHandler com.cafm.cafmbackend.exception.GlobalExceptionHandler#handleGenericException(Exception, HttpServletRequest)
2025-08-23 19:11:49.083 ERROR 70244 --- [nio-8080-exec-3] c.c.c.exception.GlobalExceptionHandler   : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Internal server error - Correlation ID: b03099f9-fddf-4dc7-a75a-4f79d81bd0cc - Path: /api/v1/users - Exception: TransactionSystemException

org.springframework.transaction.TransactionSystemException: Could not commit JPA transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:571)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:795)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:663)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:413)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.cafm.cafmbackend.service.UserService$$SpringCGLIB$$0.createUser(<generated>)
	at com.cafm.cafmbackend.api.controllers.UserController.createUser(UserController.java:122)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.cafm.cafmbackend.aspect.PerformanceMonitoringAspect.monitorControllerPerformance(PerformanceMonitoringAspect.java:197)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:269)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:264)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.cafm.cafmbackend.api.controllers.UserController$$SpringCGLIB$$0.createUser(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cafm.cafmbackend.security.SecurityHeadersConfig$CustomSecurityHeadersFilter.doFilterInternal(SecurityHeadersConfig.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cafm.cafmbackend.config.PerformanceOptimizationConfig.lambda$compressionFilter$0(PerformanceOptimizationConfig.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ShallowEtagHeaderFilter.doFilterInternal(ShallowEtagHeaderFilter.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cafm.cafmbackend.security.filter.ApiKeyAuthenticationFilter.doFilterInternal(ApiKeyAuthenticationFilter.java:65)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cafm.cafmbackend.security.filter.EnhancedTenantSecurityFilter.doFilterInternal(EnhancedTenantSecurityFilter.java:112)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cafm.cafmbackend.security.filter.RequestBodyCachingFilter.doFilterInternal(RequestBodyCachingFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.cafm.cafmbackend.security.filter.TenantSecurityFilter.doFilterInternal(TenantSecurityFilter.java:79)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.cafm.cafmbackend.security.filter.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cafm.cafmbackend.security.filter.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:102)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:113)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: jakarta.persistence.RollbackException: Error while committing the transaction
	at org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:67)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	... 216 common frames omitted
Caused by: jakarta.validation.ConstraintViolationException: Validation failed for classes [com.cafm.cafmbackend.data.entity.User] during persist time for groups [jakarta.validation.groups.Default, ]
List of constraint violations:[
	ConstraintViolationImpl{interpolatedMessage='Company is required for tenant isolation', propertyPath=company, rootBeanClass=class com.cafm.cafmbackend.data.entity.User, messageTemplate='Company is required for tenant isolation'}
]
	at org.hibernate.boot.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:151)
	at org.hibernate.boot.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:81)
	at org.hibernate.action.internal.EntityInsertAction.preInsert(EntityInsertAction.java:251)
	at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:106)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:632)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:499)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:371)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:41)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1425)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:487)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2324)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1981)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	... 217 common frames omitted

2025-08-23 19:11:49.086 DEBUG 70244 --- [        Async-1] c.c.c.s.tenant.TenantContextService      : [] No tenant context found, using system default
2025-08-23 19:11:49.087 DEBUG 70244 --- [        Async-1] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:11:49.087 DEBUG 70244 --- [        Async-1] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:11:49.088 DEBUG 70244 --- [        Async-1] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:11:49.088 DEBUG 70244 --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:11:49.089  WARN 70244 --- [        Async-1] c.cafm.cafmbackend.service.AuditService  : [] Security event: ERROR - Internal server error: TransactionSystemException at /api/v1/users - Correlation ID: b03099f9-fddf-4dc7-a75a-4f79d81bd0cc
2025-08-23 19:11:49.089 DEBUG 70244 --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Writing [ErrorResponse[timestamp=2025-08-23T19:11:49.087416, path=/api/v1/users, code=INTERNAL_SERVER_ERROR,  (truncated)...]
2025-08-23 19:11:49.089 DEBUG 70244 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Resolved [org.springframework.transaction.TransactionSystemException: Could not commit JPA transaction]
2025-08-23 19:11:49.090 DEBUG 70244 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Completed 500 INTERNAL_SERVER_ERROR
2025-08-23 19:11:49.092 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:11:49.093 DEBUG 70244 --- [        Async-1] org.hibernate.SQL                        : [] 
    /* insert for
        com.cafm.cafmbackend.data.entity.AuditLog */insert 
    into
        audit_logs (action, api_endpoint, changes, company_id, duration_ms, entity_id, entity_name, entity_type, error_message, http_method, ip_address, new_values, old_values, request_id, response_code, session_id, status, timestamp, user_agent, user_id, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    /* insert for
        com.cafm.cafmbackend.data.entity.AuditLog */insert 
    into
        audit_logs (action, api_endpoint, changes, company_id, duration_ms, entity_id, entity_name, entity_type, error_message, http_method, ip_address, new_values, old_values, request_id, response_code, session_id, status, timestamp, user_agent, user_id, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-23 19:11:49.103 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:11:49.105 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Clearing tenant context
2025-08-23 19:11:49.105 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:11:49.106 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Cleared database tenant context
2025-08-23 19:11:49.106 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Clearing tenant context
2025-08-23 19:11:49.107 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:11:49.107 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Cleared database tenant context
2025-08-23 19:14:30.330 DEBUG 70244 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/assets
2025-08-23 19:14:30.342 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:14:30.344 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:14:30.348 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:14:30.349 DEBUG 70244 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:14:30.359  WARN 70244 --- [nio-8080-exec-5] SECURITY_AUDIT                           : [] Authorization DENIED - User: anonymousUser - Decision: AuthorizationDecision [granted=false] - Time: 2025-08-23T19:14:30.359497
2025-08-23 19:14:30.365 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:14:30.372 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:14:30.376 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:14:30.376 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:14:30.378 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:14:34.745 DEBUG 70244 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/auth/login
2025-08-23 19:14:34.747 DEBUG 70244 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:14:34.748 DEBUG 70244 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/auth/login
2025-08-23 19:14:34.749 DEBUG 70244 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:14:34.750 DEBUG 70244 --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:14:34.752 DEBUG 70244 --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:14:34.754  INFO 70244 --- [nio-8080-exec-6] c.c.c.api.controllers.AuthController     : [] Login attempt for email: admin@cafm.local
2025-08-23 19:14:34.756  INFO 70244 --- [nio-8080-exec-6] c.cafm.cafmbackend.service.AuthService   : [] Login attempt for email: admin@cafm.local
2025-08-23 19:14:34.761 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:14:34.764 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:14:34.837 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:14:34.842 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:14:34.852  INFO 70244 --- [nio-8080-exec-6] SECURITY_AUDIT                           : [] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:14:34.852750 - Details: Login successful
2025-08-23 19:14:34.853  INFO 70244 --- [nio-8080-exec-6] c.c.c.api.controllers.AuthController     : [] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:14:34.853 DEBUG 70244 --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:14:34.853 DEBUG 70244 --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:14:34.854 DEBUG 70244 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:17:25.099 DEBUG 70244 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/auth/login
2025-08-23 19:17:25.101 DEBUG 70244 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:17:25.102 DEBUG 70244 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/auth/login
2025-08-23 19:17:25.102 DEBUG 70244 --- [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:17:25.103 DEBUG 70244 --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:17:25.105 DEBUG 70244 --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:17:25.107  INFO 70244 --- [nio-8080-exec-8] c.c.c.api.controllers.AuthController     : [] Login attempt for email: admin@cafm.local
2025-08-23 19:17:25.115  INFO 70244 --- [nio-8080-exec-8] c.cafm.cafmbackend.service.AuthService   : [] Login attempt for email: admin@cafm.local
2025-08-23 19:17:25.123 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:17:25.129 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:17:25.188 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:17:25.194 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:17:25.204  INFO 70244 --- [nio-8080-exec-8] SECURITY_AUDIT                           : [] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:17:25.204529 - Details: Login successful
2025-08-23 19:17:25.204  INFO 70244 --- [nio-8080-exec-8] c.c.c.api.controllers.AuthController     : [] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:17:25.205 DEBUG 70244 --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:17:25.205 DEBUG 70244 --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:17:25.206 DEBUG 70244 --- [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:17:25.224 DEBUG 70244 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : [] Securing GET /api/v1/schools/stats
2025-08-23 19:17:25.232 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:17:25.235 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:17:25.238 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:17:25.240 DEBUG 70244 --- [nio-8080-exec-9] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:25.240 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:17:25.242 DEBUG 70244 --- [nio-8080-exec-9] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:25.247 DEBUG 70244 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : [] Secured GET /api/v1/schools/stats
2025-08-23 19:17:25.248 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:17:25.250 DEBUG 70244 --- [nio-8080-exec-9] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:25.250 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:17:25.252 DEBUG 70244 --- [nio-8080-exec-9] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:25.252  INFO 70244 --- [nio-8080-exec-9] SECURITY                                 : [] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=GET, uri=/api/v1/schools/stats
2025-08-23 19:17:25.252 DEBUG 70244 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : [] GET "/api/v1/schools/stats", parameters={}
2025-08-23 19:17:25.252 DEBUG 70244 --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.controller.SchoolController#getSchoolStatistics()
2025-08-23 19:17:25.258 DEBUG 70244 --- [nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : [] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cafm.cafmbackend.controller.SchoolController.getSchoolStatistics(); target is of class [com.cafm.cafmbackend.controller.SchoolController]
2025-08-23 19:17:25.261 DEBUG 70244 --- [nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : [] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cafm.cafmbackend.controller.SchoolController.getSchoolStatistics(); target is of class [com.cafm.cafmbackend.controller.SchoolController]
2025-08-23 19:17:25.261 DEBUG 70244 --- [nio-8080-exec-9] c.c.c.controller.SchoolController        : [] Get school statistics request
2025-08-23 19:17:25.263 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:17:25.265 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:17:25.267 DEBUG 70244 --- [nio-8080-exec-9] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:25.267 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:17:25.269 DEBUG 70244 --- [nio-8080-exec-9] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:25.273 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        s1_0.id,
        s1_0.activity_level,
        s1_0.address,
        s1_0.city,
        s1_0.code,
        s1_0.company_id,
        s1_0.created_at,
        s1_0.created_by,
        s1_0.deleted_at,
        s1_0.deleted_by,
        s1_0.deletion_reason,
        s1_0.gender,
        s1_0.is_active,
        s1_0.latitude,
        s1_0.longitude,
        s1_0.maintenance_score,
        s1_0.modified_by,
        s1_0.name,
        s1_0.name_ar,
        s1_0.type,
        s1_0.updated_at,
        s1_0.version 
    from
        schools s1_0
Hibernate: 
    /* <criteria> */ select
        s1_0.id,
        s1_0.activity_level,
        s1_0.address,
        s1_0.city,
        s1_0.code,
        s1_0.company_id,
        s1_0.created_at,
        s1_0.created_by,
        s1_0.deleted_at,
        s1_0.deleted_by,
        s1_0.deletion_reason,
        s1_0.gender,
        s1_0.is_active,
        s1_0.latitude,
        s1_0.longitude,
        s1_0.maintenance_score,
        s1_0.modified_by,
        s1_0.name,
        s1_0.name_ar,
        s1_0.type,
        s1_0.updated_at,
        s1_0.version 
    from
        schools s1_0
2025-08-23 19:17:25.292 DEBUG 70244 --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:17:25.295 DEBUG 70244 --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [SchoolStatsResponse[totalSchools=10, activeSchools=10, inactiveSchools=0, primarySchools=7, intermed (truncated)...]
2025-08-23 19:17:25.298 DEBUG 70244 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:17:25.299 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:17:25.301 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:17:25.303 DEBUG 70244 --- [nio-8080-exec-9] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:17:25.303 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:17:25.304 DEBUG 70244 --- [nio-8080-exec-9] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:17:25.305 DEBUG 70244 --- [nio-8080-exec-9] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:17:25.305 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:17:25.306 DEBUG 70244 --- [nio-8080-exec-9] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:17:26.254 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] HTTP POST http://localhost:9411/api/v2/spans
2025-08-23 19:17:26.255 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Accept=[application/json, application/*+json]
2025-08-23 19:17:26.255 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Writing [[B@62e285f6] as "application/json"
2025-08-23 19:17:26.263  WARN 70244 --- [/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : [] Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-08-23 19:17:26.263  WARN 70244 --- [/api/v2/spans}}] z.r.i.AsyncReporter$BoundedAsyncReporter : [] Dropped 6 spans due to ResourceAccessException(I/O error on POST request for "http://localhost:9411/api/v2/spans": Failed to connect to localhost/[0:0:0:0:0:0:0:1]:9411)

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9411/api/v2/spans": Failed to connect to localhost/[0:0:0:0:0:0:0:1]:9411
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:915)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:895)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:830)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:691)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender.postSpans(ZipkinRestTemplateSender.java:50)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:68)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:40)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: java.net.ConnectException: Failed to connect to localhost/[0:0:0:0:0:0:0:1]:9411
	at okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.kt:297)
	at okhttp3.internal.connection.RealConnection.connect(RealConnection.kt:207)
	at okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.kt:226)
	at okhttp3.internal.connection.ExchangeFinder.findHealthyConnection(ExchangeFinder.kt:106)
	at okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.kt:74)
	at okhttp3.internal.connection.RealCall.initExchange$okhttp(RealCall.kt:255)
	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)
	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)
	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)
	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)
	at okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)
	at okhttp3.internal.connection.RealCall.execute(RealCall.kt:154)
	at org.springframework.http.client.OkHttp3ClientHttpRequest.executeInternal(OkHttp3ClientHttpRequest.java:95)
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:70)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:889)
	... 9 common frames omitted
	Suppressed: java.net.ConnectException: Failed to connect to localhost/127.0.0.1:9411
		... 29 common frames omitted
	Caused by: java.net.ConnectException: Connection refused
		at java.base/sun.nio.ch.Net.pollConnect(Native Method)
		at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
		at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549)
		at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
		at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
		at java.base/java.net.Socket.connect(Socket.java:760)
		at okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)
		at okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.kt:295)
		... 28 common frames omitted
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:760)
	at okhttp3.internal.platform.Platform.connectSocket(Platform.kt:128)
	at okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.kt:295)
	... 28 common frames omitted

2025-08-23 19:17:35.388 DEBUG 70244 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : [] Securing GET /api/v1/assets/stats
2025-08-23 19:17:35.389 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:35.390 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:17:35.391 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:35.392 DEBUG 70244 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:17:35.392  WARN 70244 --- [io-8080-exec-10] SECURITY_AUDIT                           : [] Authorization DENIED - User: anonymousUser - Decision: AuthorizationDecision [granted=false] - Time: 2025-08-23T19:17:35.392644
2025-08-23 19:17:35.394 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:17:35.396 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:17:35.397 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:17:35.398 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:17:35.399 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:17:36.298 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] HTTP POST http://localhost:9411/api/v2/spans
2025-08-23 19:17:36.299 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Accept=[application/json, application/*+json]
2025-08-23 19:17:36.299 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Writing [[B@7e4f58da] as "application/json"
2025-08-23 19:17:45.671 DEBUG 70244 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/auth/login
2025-08-23 19:17:45.672 DEBUG 70244 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:17:45.672 DEBUG 70244 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/auth/login
2025-08-23 19:17:45.672 DEBUG 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:17:45.673 DEBUG 70244 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:17:45.673 DEBUG 70244 --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:17:45.673  INFO 70244 --- [nio-8080-exec-1] c.c.c.api.controllers.AuthController     : [] Login attempt for email: admin@cafm.local
2025-08-23 19:17:45.675  INFO 70244 --- [nio-8080-exec-1] c.cafm.cafmbackend.service.AuthService   : [] Login attempt for email: admin@cafm.local
2025-08-23 19:17:45.676 DEBUG 70244 --- [nio-8080-exec-1] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:17:45.680 DEBUG 70244 --- [nio-8080-exec-1] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:17:45.736 DEBUG 70244 --- [nio-8080-exec-1] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:17:45.739 DEBUG 70244 --- [nio-8080-exec-1] org.hibernate.SQL                        : [] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:17:45.744  INFO 70244 --- [nio-8080-exec-1] SECURITY_AUDIT                           : [] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:17:45.744956 - Details: Login successful
2025-08-23 19:17:45.745  INFO 70244 --- [nio-8080-exec-1] c.c.c.api.controllers.AuthController     : [] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:17:45.745 DEBUG 70244 --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:17:45.745 DEBUG 70244 --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:17:45.745 DEBUG 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:17:45.757 DEBUG 70244 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : [] Securing GET /api/v1/assets/stats
2025-08-23 19:17:45.759 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:17:45.761 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:17:45.763 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:17:45.766 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:45.766 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:17:45.768 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:45.769 DEBUG 70244 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : [] Secured GET /api/v1/assets/stats
2025-08-23 19:17:45.769 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:17:45.771 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:45.771 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:17:45.772 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:45.773  INFO 70244 --- [nio-8080-exec-2] SECURITY                                 : [] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=GET, uri=/api/v1/assets/stats
2025-08-23 19:17:45.773 DEBUG 70244 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : [] GET "/api/v1/assets/stats", parameters={}
2025-08-23 19:17:45.773 DEBUG 70244 --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.AssetController#getAssetStatistics()
2025-08-23 19:17:45.773 DEBUG 70244 --- [nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : [] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cafm.cafmbackend.api.controllers.AssetController.getAssetStatistics(); target is of class [com.cafm.cafmbackend.api.controllers.AssetController]
2025-08-23 19:17:45.774 DEBUG 70244 --- [nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : [] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cafm.cafmbackend.api.controllers.AssetController.getAssetStatistics(); target is of class [com.cafm.cafmbackend.api.controllers.AssetController]
2025-08-23 19:17:45.774 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.api.controllers.AssetController    : [] Get asset statistics request
2025-08-23 19:17:45.775 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:17:45.777 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:17:45.778 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:45.779 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:17:45.780 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:17:45.784 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        a1_0.id,
        a1_0.asset_code,
        a1_0.assigned_to,
        a1_0.assignment_date,
        a1_0.barcode,
        a1_0.category_id,
        a1_0.company_id,
        a1_0.condition,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.current_value,
        a1_0.deleted_at,
        a1_0.deleted_by,
        a1_0.deletion_reason,
        a1_0.department,
        a1_0.depreciation_method,
        a1_0.description,
        a1_0.disposal_date,
        a1_0.disposal_method,
        a1_0.disposal_reason,
        a1_0.disposal_value,
        a1_0.is_active,
        a1_0.last_maintenance_date,
        a1_0.location,
        a1_0.maintenance_frequency_days,
        a1_0.manufacturer,
        a1_0.model,
        a1_0.modified_by,
        a1_0.name,
        a1_0.name_ar,
        a1_0.next_maintenance_date,
        a1_0.purchase_cost,
        a1_0.purchase_date,
        a1_0.purchase_order_number,
        a1_0.salvage_value,
        a1_0.school_id,
        a1_0.serial_number,
        a1_0.status,
        a1_0.supplier,
        a1_0.total_maintenance_cost,
        a1_0.updated_at,
        a1_0.version,
        a1_0.warranty_end_date,
        a1_0.warranty_start_date 
    from
        assets a1_0 
    where
        a1_0.company_id=?
Hibernate: 
    /* <criteria> */ select
        a1_0.id,
        a1_0.asset_code,
        a1_0.assigned_to,
        a1_0.assignment_date,
        a1_0.barcode,
        a1_0.category_id,
        a1_0.company_id,
        a1_0.condition,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.current_value,
        a1_0.deleted_at,
        a1_0.deleted_by,
        a1_0.deletion_reason,
        a1_0.department,
        a1_0.depreciation_method,
        a1_0.description,
        a1_0.disposal_date,
        a1_0.disposal_method,
        a1_0.disposal_reason,
        a1_0.disposal_value,
        a1_0.is_active,
        a1_0.last_maintenance_date,
        a1_0.location,
        a1_0.maintenance_frequency_days,
        a1_0.manufacturer,
        a1_0.model,
        a1_0.modified_by,
        a1_0.name,
        a1_0.name_ar,
        a1_0.next_maintenance_date,
        a1_0.purchase_cost,
        a1_0.purchase_date,
        a1_0.purchase_order_number,
        a1_0.salvage_value,
        a1_0.school_id,
        a1_0.serial_number,
        a1_0.status,
        a1_0.supplier,
        a1_0.total_maintenance_cost,
        a1_0.updated_at,
        a1_0.version,
        a1_0.warranty_end_date,
        a1_0.warranty_start_date 
    from
        assets a1_0 
    where
        a1_0.company_id=?
2025-08-23 19:17:45.797 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        ac1_0.id,
        ac1_0.company_id,
        ac1_0.created_at,
        ac1_0.created_by,
        ac1_0.deleted_at,
        ac1_0.deleted_by,
        ac1_0.deletion_reason,
        ac1_0.depreciation_rate,
        ac1_0.description,
        ac1_0.is_active,
        ac1_0.modified_by,
        ac1_0.name,
        ac1_0.name_ar,
        ac1_0.updated_at,
        ac1_0.useful_life_years,
        ac1_0.version 
    from
        asset_categories ac1_0 
    where
        ac1_0.id=?
Hibernate: 
    select
        ac1_0.id,
        ac1_0.company_id,
        ac1_0.created_at,
        ac1_0.created_by,
        ac1_0.deleted_at,
        ac1_0.deleted_by,
        ac1_0.deletion_reason,
        ac1_0.depreciation_rate,
        ac1_0.description,
        ac1_0.is_active,
        ac1_0.modified_by,
        ac1_0.name,
        ac1_0.name_ar,
        ac1_0.updated_at,
        ac1_0.useful_life_years,
        ac1_0.version 
    from
        asset_categories ac1_0 
    where
        ac1_0.id=?
2025-08-23 19:17:45.801 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        s1_0.id,
        s1_0.activity_level,
        s1_0.address,
        s1_0.city,
        s1_0.code,
        s1_0.company_id,
        s1_0.created_at,
        s1_0.created_by,
        s1_0.deleted_at,
        s1_0.deleted_by,
        s1_0.deletion_reason,
        s1_0.gender,
        s1_0.is_active,
        s1_0.latitude,
        s1_0.longitude,
        s1_0.maintenance_score,
        s1_0.modified_by,
        s1_0.name,
        s1_0.name_ar,
        s1_0.type,
        s1_0.updated_at,
        s1_0.version 
    from
        schools s1_0 
    where
        s1_0.id=?
Hibernate: 
    select
        s1_0.id,
        s1_0.activity_level,
        s1_0.address,
        s1_0.city,
        s1_0.code,
        s1_0.company_id,
        s1_0.created_at,
        s1_0.created_by,
        s1_0.deleted_at,
        s1_0.deleted_by,
        s1_0.deletion_reason,
        s1_0.gender,
        s1_0.is_active,
        s1_0.latitude,
        s1_0.longitude,
        s1_0.maintenance_score,
        s1_0.modified_by,
        s1_0.name,
        s1_0.name_ar,
        s1_0.type,
        s1_0.updated_at,
        s1_0.version 
    from
        schools s1_0 
    where
        s1_0.id=?
2025-08-23 19:17:45.816 DEBUG 70244 --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:17:45.818 DEBUG 70244 --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [AssetStatsResponse[totalAssets=12, activeAssets=10, reservedAssets=0, maintenanceAssets=0, retiredAs (truncated)...]
2025-08-23 19:17:45.819 DEBUG 70244 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:17:45.820 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:17:45.823 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:17:45.825 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:17:45.826 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:17:45.827 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:17:45.827 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:17:45.827 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:17:45.828 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:18:11.081 DEBUG 70244 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Securing POST /api/v1/auth/login
2025-08-23 19:18:11.082 DEBUG 70244 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:18:11.084 DEBUG 70244 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Secured POST /api/v1/auth/login
2025-08-23 19:18:11.084 DEBUG 70244 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:18:11.085 DEBUG 70244 --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:18:11.085 DEBUG 70244 --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:18:11.086  INFO 70244 --- [nio-8080-exec-3] c.c.c.api.controllers.AuthController     : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Login attempt for email: admin@cafm.local
2025-08-23 19:18:11.087  INFO 70244 --- [nio-8080-exec-3] c.cafm.cafmbackend.service.AuthService   : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Login attempt for email: admin@cafm.local
2025-08-23 19:18:11.088 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:18:11.094 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:18:11.154 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:18:11.156 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:18:11.164  INFO 70244 --- [nio-8080-exec-3] SECURITY_AUDIT                           : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:18:11.164055 - Details: Login successful
2025-08-23 19:18:11.164  INFO 70244 --- [nio-8080-exec-3] c.c.c.api.controllers.AuthController     : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:18:11.164 DEBUG 70244 --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:18:11.164 DEBUG 70244 --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:18:11.164 DEBUG 70244 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Completed 200 OK
2025-08-23 19:18:11.177 DEBUG 70244 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/auth/login
2025-08-23 19:18:11.177 DEBUG 70244 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:18:11.177 DEBUG 70244 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/auth/login
2025-08-23 19:18:11.177 DEBUG 70244 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:18:11.178 DEBUG 70244 --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:18:11.178 DEBUG 70244 --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:18:11.178  INFO 70244 --- [nio-8080-exec-4] c.c.c.api.controllers.AuthController     : [] Login attempt for email: admin@cafm.local
2025-08-23 19:18:11.179  INFO 70244 --- [nio-8080-exec-4] c.cafm.cafmbackend.service.AuthService   : [] Login attempt for email: admin@cafm.local
2025-08-23 19:18:11.180 DEBUG 70244 --- [nio-8080-exec-4] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:18:11.181 DEBUG 70244 --- [nio-8080-exec-4] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:18:11.242 DEBUG 70244 --- [nio-8080-exec-4] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:18:11.244 DEBUG 70244 --- [nio-8080-exec-4] org.hibernate.SQL                        : [] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:18:11.248  INFO 70244 --- [nio-8080-exec-4] SECURITY_AUDIT                           : [] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:18:11.247996 - Details: Login successful
2025-08-23 19:18:11.248  INFO 70244 --- [nio-8080-exec-4] c.c.c.api.controllers.AuthController     : [] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:18:11.254 DEBUG 70244 --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:18:11.254 DEBUG 70244 --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:18:11.255 DEBUG 70244 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:18:11.271 DEBUG 70244 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : [] Securing GET /api/v1/companies/00000000-0000-0000-0000-000000000001/stats
2025-08-23 19:18:11.273 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:18:11.275 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:18:11.276 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:18:11.277 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:18:11.277 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:18:11.278 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:18:11.278 DEBUG 70244 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : [] Secured GET /api/v1/companies/00000000-0000-0000-0000-000000000001/stats
2025-08-23 19:18:11.279 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:18:11.280 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:18:11.280 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:18:11.281 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:18:11.281  INFO 70244 --- [nio-8080-exec-5] SECURITY                                 : [] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=GET, uri=/api/v1/companies/00000000-0000-0000-0000-000000000001/stats
2025-08-23 19:18:11.281 DEBUG 70244 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : [] GET "/api/v1/companies/00000000-0000-0000-0000-000000000001/stats", parameters={}
2025-08-23 19:18:11.281 DEBUG 70244 --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.controller.CompanyController#getCompanyStats(UUID)
2025-08-23 19:18:11.282 DEBUG 70244 --- [nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : [] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cafm.cafmbackend.controller.CompanyController.getCompanyStats(java.util.UUID); target is of class [com.cafm.cafmbackend.controller.CompanyController]
2025-08-23 19:18:11.283 DEBUG 70244 --- [nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : [] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cafm.cafmbackend.controller.CompanyController.getCompanyStats(java.util.UUID); target is of class [com.cafm.cafmbackend.controller.CompanyController]
2025-08-23 19:18:11.283 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.controller.CompanyController       : [] Get statistics for company: 00000000-0000-0000-0000-000000000001
2025-08-23 19:18:11.283 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:18:11.287 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        count(u1_0.id) 
    from
        users u1_0 
    where
        u1_0.company_id=? 
        and u1_0.deleted_at is null
Hibernate: 
    /* <criteria> */ select
        count(u1_0.id) 
    from
        users u1_0 
    where
        u1_0.company_id=? 
        and u1_0.deleted_at is null
2025-08-23 19:18:11.289 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        count(s1_0.id) 
    from
        schools s1_0 
    where
        s1_0.company_id=? 
        and s1_0.deleted_at is null
Hibernate: 
    /* <criteria> */ select
        count(s1_0.id) 
    from
        schools s1_0 
    where
        s1_0.company_id=? 
        and s1_0.deleted_at is null
2025-08-23 19:18:11.292 DEBUG 70244 --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:18:11.293 DEBUG 70244 --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [CompanyStatsResponse[totalUsers=14, activeUsers=14, inactiveUsers=0, userUtilizationPercentage=1, to (truncated)...]
2025-08-23 19:18:11.293 DEBUG 70244 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:18:11.294 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:18:11.295 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:18:11.296 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:18:11.297 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:18:11.297 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:18:11.297 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:18:11.298 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:18:11.298 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:18:11.406 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] HTTP POST http://localhost:9411/api/v2/spans
2025-08-23 19:18:11.406 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Accept=[application/json, application/*+json]
2025-08-23 19:18:11.407 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Writing [[B@40d695] as "application/json"
2025-08-23 19:18:59.362 DEBUG 70244 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/auth/login
2025-08-23 19:18:59.363 DEBUG 70244 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:18:59.363 DEBUG 70244 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/auth/login
2025-08-23 19:18:59.363 DEBUG 70244 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:18:59.363 DEBUG 70244 --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:18:59.364 DEBUG 70244 --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:18:59.364  INFO 70244 --- [nio-8080-exec-6] c.c.c.api.controllers.AuthController     : [] Login attempt for email: admin@cafm.local
2025-08-23 19:18:59.365  INFO 70244 --- [nio-8080-exec-6] c.cafm.cafmbackend.service.AuthService   : [] Login attempt for email: admin@cafm.local
2025-08-23 19:18:59.366 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:18:59.368 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:18:59.424 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:18:59.427 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:18:59.433  INFO 70244 --- [nio-8080-exec-6] SECURITY_AUDIT                           : [] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:18:59.433327 - Details: Login successful
2025-08-23 19:18:59.433  INFO 70244 --- [nio-8080-exec-6] c.c.c.api.controllers.AuthController     : [] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:18:59.433 DEBUG 70244 --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:18:59.433 DEBUG 70244 --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:18:59.434 DEBUG 70244 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:18:59.444 DEBUG 70244 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/notifications/send
2025-08-23 19:18:59.446 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:18:59.449 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:18:59.450 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:18:59.452 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:18:59.452 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:18:59.453 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:18:59.454 DEBUG 70244 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/notifications/send
2025-08-23 19:18:59.454 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:18:59.456 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:18:59.456 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:18:59.457 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:18:59.457  INFO 70244 --- [nio-8080-exec-7] SECURITY                                 : [] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=POST, uri=/api/v1/notifications/send
2025-08-23 19:18:59.457 DEBUG 70244 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/notifications/send", parameters={}
2025-08-23 19:18:59.458 DEBUG 70244 --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.NotificationController#sendInAppNotification(UUID, NotificationRequest)
2025-08-23 19:18:59.459 DEBUG 70244 --- [nio-8080-exec-7] o.s.web.method.HandlerMethod             : [] Could not resolve parameter [0] in public org.springframework.http.ResponseEntity<com.cafm.cafmbackend.dto.notification.NotificationResponse> com.cafm.cafmbackend.api.controllers.NotificationController.sendInAppNotification(java.util.UUID,com.cafm.cafmbackend.dto.notification.NotificationRequest): Required request parameter 'userId' for method parameter type UUID is not present
2025-08-23 19:18:59.459 DEBUG 70244 --- [nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : [] Using @ExceptionHandler com.cafm.cafmbackend.exception.GlobalExceptionHandler#handleMissingServletRequestParameterException(MissingServletRequestParameterException, HttpServletRequest)
2025-08-23 19:18:59.459  INFO 70244 --- [nio-8080-exec-7] c.c.c.exception.GlobalExceptionHandler   : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Request exception: Missing request parameter - Correlation ID: e4db0ec4-10db-4c7d-bf0c-fec9b27640c2 - Path: /api/v1/notifications/send - Message: Required request parameter 'userId' for method parameter type UUID is not present
2025-08-23 19:18:59.460 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.exception.ErrorMessageResolver     : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Message key 'error.parameter.missing' not found for locale 'en', using default message
2025-08-23 19:18:59.460 DEBUG 70244 --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:18:59.460 DEBUG 70244 --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Writing [ErrorResponse[timestamp=2025-08-23T19:18:59.460251, path=/api/v1/notifications/send, code=MISSING_RE (truncated)...]
2025-08-23 19:18:59.461 DEBUG 70244 --- [nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'userId' for method parameter type UUID is not present]
2025-08-23 19:18:59.461 DEBUG 70244 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Completed 400 BAD_REQUEST
2025-08-23 19:18:59.462 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:18:59.464 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:18:59.465 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Clearing tenant context
2025-08-23 19:18:59.465 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:18:59.466 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Cleared database tenant context
2025-08-23 19:18:59.467 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Clearing tenant context
2025-08-23 19:18:59.467 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:18:59.468 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Cleared database tenant context
2025-08-23 19:20:56.831 DEBUG 70244 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/notifications/send
2025-08-23 19:20:56.834 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:20:56.836 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:20:56.841 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:20:56.842 DEBUG 70244 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:20:56.843  WARN 70244 --- [nio-8080-exec-8] SECURITY_AUDIT                           : [] Authorization DENIED - User: anonymousUser - Decision: AuthorizationDecision [granted=false] - Time: 2025-08-23T19:20:56.843371
2025-08-23 19:20:56.846 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:20:56.851 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:20:56.853 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:20:56.853 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:20:56.854 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:21:05.412 DEBUG 70244 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/auth/login
2025-08-23 19:21:05.413 DEBUG 70244 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:21:05.414 DEBUG 70244 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/auth/login
2025-08-23 19:21:05.414 DEBUG 70244 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:21:05.414 DEBUG 70244 --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:21:05.421 DEBUG 70244 --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [LoginRequest[email=null, password=admin123, deviceId=null, deviceName=null, ipAddress=null, userAgen (truncated)...]
2025-08-23 19:21:05.425 DEBUG 70244 --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : [] Using @ExceptionHandler com.cafm.cafmbackend.exception.GlobalExceptionHandler#handleMethodArgumentNotValidException(MethodArgumentNotValidException, HttpServletRequest)
2025-08-23 19:21:05.426  INFO 70244 --- [nio-8080-exec-9] c.c.c.exception.GlobalExceptionHandler   : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Validation exception: Method argument validation failed - Correlation ID: 0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f - Path: /api/v1/auth/login - Errors: 1 - Message: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.cafm.cafmbackend.dto.auth.LoginResponse> com.cafm.cafmbackend.api.controllers.AuthController.login(com.cafm.cafmbackend.dto.auth.LoginRequest,jakarta.servlet.http.HttpServletRequest): [Field error in object 'loginRequest' on field 'email': rejected value [null]; codes [NotBlank.loginRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.email,email]; arguments []; default message [email]]; default message [Email is required]] 
2025-08-23 19:21:05.427 DEBUG 70244 --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:21:05.427 DEBUG 70244 --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Writing [ErrorResponse[timestamp=2025-08-23T19:21:05.426647, path=/api/v1/auth/login, code=VALIDATION_FAILED, (truncated)...]
2025-08-23 19:21:05.428 DEBUG 70244 --- [nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.cafm.cafmbackend.dto.auth.LoginResponse> com.cafm.cafmbackend.api.controllers.AuthController.login(com.cafm.cafmbackend.dto.auth.LoginRequest,jakarta.servlet.http.HttpServletRequest): [Field error in object 'loginRequest' on field 'email': rejected value [null]; codes [NotBlank.loginRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.email,email]; arguments []; default message [email]]; default message [Email is required]] ]
2025-08-23 19:21:05.428 DEBUG 70244 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Completed 400 BAD_REQUEST
2025-08-23 19:21:05.985 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] HTTP POST http://localhost:9411/api/v2/spans
2025-08-23 19:21:05.986 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Accept=[application/json, application/*+json]
2025-08-23 19:21:05.986 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Writing [[B@2c376e7f] as "application/json"
2025-08-23 19:21:15.769 DEBUG 70244 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/auth/login
2025-08-23 19:21:15.770 DEBUG 70244 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:21:15.770 DEBUG 70244 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/auth/login
2025-08-23 19:21:15.770 DEBUG 70244 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:21:15.770 DEBUG 70244 --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:21:15.770 DEBUG 70244 --- [io-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [LoginRequest[email=null, password=admin123, deviceId=null, deviceName=null, ipAddress=null, userAgen (truncated)...]
2025-08-23 19:21:15.771 DEBUG 70244 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : [] Using @ExceptionHandler com.cafm.cafmbackend.exception.GlobalExceptionHandler#handleMethodArgumentNotValidException(MethodArgumentNotValidException, HttpServletRequest)
2025-08-23 19:21:15.771  INFO 70244 --- [io-8080-exec-10] c.c.c.exception.GlobalExceptionHandler   : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Validation exception: Method argument validation failed - Correlation ID: 4420b783-f6ee-427c-8728-8c1bb3ada6aa - Path: /api/v1/auth/login - Errors: 1 - Message: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.cafm.cafmbackend.dto.auth.LoginResponse> com.cafm.cafmbackend.api.controllers.AuthController.login(com.cafm.cafmbackend.dto.auth.LoginRequest,jakarta.servlet.http.HttpServletRequest): [Field error in object 'loginRequest' on field 'email': rejected value [null]; codes [NotBlank.loginRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.email,email]; arguments []; default message [email]]; default message [Email is required]] 
2025-08-23 19:21:15.771 DEBUG 70244 --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:21:15.771 DEBUG 70244 --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Writing [ErrorResponse[timestamp=2025-08-23T19:21:15.771561, path=/api/v1/auth/login, code=VALIDATION_FAILED, (truncated)...]
2025-08-23 19:21:15.771 DEBUG 70244 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.cafm.cafmbackend.dto.auth.LoginResponse> com.cafm.cafmbackend.api.controllers.AuthController.login(com.cafm.cafmbackend.dto.auth.LoginRequest,jakarta.servlet.http.HttpServletRequest): [Field error in object 'loginRequest' on field 'email': rejected value [null]; codes [NotBlank.loginRequest.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.email,email]; arguments []; default message [email]]; default message [Email is required]] ]
2025-08-23 19:21:15.772 DEBUG 70244 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Completed 400 BAD_REQUEST
2025-08-23 19:21:22.738 DEBUG 70244 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/auth/login
2025-08-23 19:21:22.738 DEBUG 70244 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:21:22.738 DEBUG 70244 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/auth/login
2025-08-23 19:21:22.739 DEBUG 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:21:22.739 DEBUG 70244 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:21:22.739 DEBUG 70244 --- [nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:21:22.739  INFO 70244 --- [nio-8080-exec-1] c.c.c.api.controllers.AuthController     : [] Login attempt for email: admin@cafm.local
2025-08-23 19:21:22.740  INFO 70244 --- [nio-8080-exec-1] c.cafm.cafmbackend.service.AuthService   : [] Login attempt for email: admin@cafm.local
2025-08-23 19:21:22.743 DEBUG 70244 --- [nio-8080-exec-1] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:21:22.747 DEBUG 70244 --- [nio-8080-exec-1] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:21:22.806 DEBUG 70244 --- [nio-8080-exec-1] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:21:22.811 DEBUG 70244 --- [nio-8080-exec-1] org.hibernate.SQL                        : [] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:21:22.819  INFO 70244 --- [nio-8080-exec-1] SECURITY_AUDIT                           : [] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:21:22.819134 - Details: Login successful
2025-08-23 19:21:22.819  INFO 70244 --- [nio-8080-exec-1] c.c.c.api.controllers.AuthController     : [] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:21:22.819 DEBUG 70244 --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:21:22.820 DEBUG 70244 --- [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:21:22.820 DEBUG 70244 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:21:44.623 DEBUG 70244 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/notifications/send
2025-08-23 19:21:44.626 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:21:44.629 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:21:44.630 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:21:44.632 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:21:44.632 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:21:44.633 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:21:44.634 DEBUG 70244 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/notifications/send
2025-08-23 19:21:44.634 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:21:44.636 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:21:44.636 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:21:44.637 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:21:44.637  INFO 70244 --- [nio-8080-exec-2] SECURITY                                 : [] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=POST, uri=/api/v1/notifications/send
2025-08-23 19:21:44.637 DEBUG 70244 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/notifications/send", parameters={}
2025-08-23 19:21:44.638 DEBUG 70244 --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.NotificationController#sendInAppNotification(UUID, NotificationRequest)
2025-08-23 19:21:44.638 DEBUG 70244 --- [nio-8080-exec-2] o.s.web.method.HandlerMethod             : [] Could not resolve parameter [0] in public org.springframework.http.ResponseEntity<com.cafm.cafmbackend.dto.notification.NotificationResponse> com.cafm.cafmbackend.api.controllers.NotificationController.sendInAppNotification(java.util.UUID,com.cafm.cafmbackend.dto.notification.NotificationRequest): Required request parameter 'userId' for method parameter type UUID is not present
2025-08-23 19:21:44.638 DEBUG 70244 --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : [] Using @ExceptionHandler com.cafm.cafmbackend.exception.GlobalExceptionHandler#handleMissingServletRequestParameterException(MissingServletRequestParameterException, HttpServletRequest)
2025-08-23 19:21:44.638  INFO 70244 --- [nio-8080-exec-2] c.c.c.exception.GlobalExceptionHandler   : [99710973-ad82-474a-82fd-a751375d7a9b] Request exception: Missing request parameter - Correlation ID: 99710973-ad82-474a-82fd-a751375d7a9b - Path: /api/v1/notifications/send - Message: Required request parameter 'userId' for method parameter type UUID is not present
2025-08-23 19:21:44.638 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.exception.ErrorMessageResolver     : [99710973-ad82-474a-82fd-a751375d7a9b] Message key 'error.parameter.missing' not found for locale 'en', using default message
2025-08-23 19:21:44.638 DEBUG 70244 --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [99710973-ad82-474a-82fd-a751375d7a9b] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:21:44.639 DEBUG 70244 --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [99710973-ad82-474a-82fd-a751375d7a9b] Writing [ErrorResponse[timestamp=2025-08-23T19:21:44.638776, path=/api/v1/notifications/send, code=MISSING_RE (truncated)...]
2025-08-23 19:21:44.639 DEBUG 70244 --- [nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : [99710973-ad82-474a-82fd-a751375d7a9b] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'userId' for method parameter type UUID is not present]
2025-08-23 19:21:44.639 DEBUG 70244 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : [99710973-ad82-474a-82fd-a751375d7a9b] Completed 400 BAD_REQUEST
2025-08-23 19:21:44.639 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [99710973-ad82-474a-82fd-a751375d7a9b] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:21:44.641 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [99710973-ad82-474a-82fd-a751375d7a9b] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:21:44.643 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [99710973-ad82-474a-82fd-a751375d7a9b] Clearing tenant context
2025-08-23 19:21:44.644 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [99710973-ad82-474a-82fd-a751375d7a9b] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:21:44.646 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [99710973-ad82-474a-82fd-a751375d7a9b] Cleared database tenant context
2025-08-23 19:21:44.646 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [99710973-ad82-474a-82fd-a751375d7a9b] Clearing tenant context
2025-08-23 19:21:44.646 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [99710973-ad82-474a-82fd-a751375d7a9b] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:21:44.647 DEBUG 70244 --- [nio-8080-exec-2] c.c.c.s.tenant.TenantContextService      : [99710973-ad82-474a-82fd-a751375d7a9b] Cleared database tenant context
2025-08-23 19:21:45.125 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] HTTP POST http://localhost:9411/api/v2/spans
2025-08-23 19:21:45.125 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Accept=[application/json, application/*+json]
2025-08-23 19:21:45.125 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Writing [[B@c75edbd] as "application/json"
2025-08-23 19:22:09.538 DEBUG 70244 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Securing POST /api/v1/notifications/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:22:09.540 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:22:09.541 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:22:09.544 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:22:09.544 DEBUG 70244 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:22:09.545  WARN 70244 --- [nio-8080-exec-3] SECURITY_AUDIT                           : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Authorization DENIED - User: anonymousUser - Decision: AuthorizationDecision [granted=false] - Time: 2025-08-23T19:22:09.545314
2025-08-23 19:22:09.547 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:22:09.551 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:22:09.554 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Clearing tenant context
2025-08-23 19:22:09.554 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:22:09.555 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Cleared database tenant context
2025-08-23 19:22:23.944 DEBUG 70244 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/auth/login
2025-08-23 19:22:23.944 DEBUG 70244 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:22:23.945 DEBUG 70244 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/auth/login
2025-08-23 19:22:23.945 DEBUG 70244 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:22:23.945 DEBUG 70244 --- [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:22:23.946 DEBUG 70244 --- [nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:22:23.946  INFO 70244 --- [nio-8080-exec-4] c.c.c.api.controllers.AuthController     : [] Login attempt for email: admin@cafm.local
2025-08-23 19:22:23.949  INFO 70244 --- [nio-8080-exec-4] c.cafm.cafmbackend.service.AuthService   : [] Login attempt for email: admin@cafm.local
2025-08-23 19:22:23.950 DEBUG 70244 --- [nio-8080-exec-4] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:22:23.952 DEBUG 70244 --- [nio-8080-exec-4] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:22:24.013 DEBUG 70244 --- [nio-8080-exec-4] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:22:24.020 DEBUG 70244 --- [nio-8080-exec-4] org.hibernate.SQL                        : [] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:22:24.031  INFO 70244 --- [nio-8080-exec-4] SECURITY_AUDIT                           : [] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:22:24.031456 - Details: Login successful
2025-08-23 19:22:24.031  INFO 70244 --- [nio-8080-exec-4] c.c.c.api.controllers.AuthController     : [] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:22:24.032 DEBUG 70244 --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:22:24.032 DEBUG 70244 --- [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:22:24.032 DEBUG 70244 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:22:24.084 DEBUG 70244 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/notifications/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:22:24.086 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:22:24.088 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:22:24.089 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:22:24.090 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:22:24.090 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:22:24.090 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:22:24.091 DEBUG 70244 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/notifications/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:22:24.091 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:22:24.092 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:22:24.092 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:22:24.093 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:22:24.093  INFO 70244 --- [nio-8080-exec-5] SECURITY                                 : [] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=POST, uri=/api/v1/notifications/send
2025-08-23 19:22:24.093 DEBUG 70244 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/notifications/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd", parameters={masked}
2025-08-23 19:22:24.094 DEBUG 70244 --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.NotificationController#sendInAppNotification(UUID, NotificationRequest)
2025-08-23 19:22:24.106 DEBUG 70244 --- [nio-8080-exec-5] o.s.web.method.HandlerMethod             : [] Could not resolve parameter [1] in public org.springframework.http.ResponseEntity<com.cafm.cafmbackend.dto.notification.NotificationResponse> com.cafm.cafmbackend.api.controllers.NotificationController.sendInAppNotification(java.util.UUID,com.cafm.cafmbackend.dto.notification.NotificationRequest): JSON parse error: Cannot deserialize value of type `com.cafm.cafmbackend.data.entity.NotificationQueue$NotificationPriority` from String "MEDIUM": not one of the values accepted for Enum class: [URGENT, HIGH, LOW, NORMAL]
2025-08-23 19:22:24.106 DEBUG 70244 --- [nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : [] Using @ExceptionHandler com.cafm.cafmbackend.exception.GlobalExceptionHandler#handleHttpMessageNotReadableException(HttpMessageNotReadableException, HttpServletRequest)
2025-08-23 19:22:24.107  INFO 70244 --- [nio-8080-exec-5] c.c.c.exception.GlobalExceptionHandler   : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Request exception: Invalid request format - Correlation ID: f4f1f232-f294-4272-9d49-e1583c64d2d3 - Path: /api/v1/notifications/send - Message: JSON parse error: Cannot deserialize value of type `com.cafm.cafmbackend.data.entity.NotificationQueue$NotificationPriority` from String "MEDIUM": not one of the values accepted for Enum class: [URGENT, HIGH, LOW, NORMAL]
2025-08-23 19:22:24.107 DEBUG 70244 --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:22:24.107 DEBUG 70244 --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Writing [ErrorResponse[timestamp=2025-08-23T19:22:24.107138, path=/api/v1/notifications/send, code=INVALID_RE (truncated)...]
2025-08-23 19:22:24.107 DEBUG 70244 --- [nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `com.cafm.cafmbackend.data.entity.NotificationQueue$NotificationPriority` from String "MEDIUM": not one of the values accepted for Enum class: [URGENT, HIGH, LOW, NORMAL]]
2025-08-23 19:22:24.107 DEBUG 70244 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Completed 400 BAD_REQUEST
2025-08-23 19:22:24.108 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:22:24.109 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:22:24.110 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Clearing tenant context
2025-08-23 19:22:24.110 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:22:24.111 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Cleared database tenant context
2025-08-23 19:22:24.111 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Clearing tenant context
2025-08-23 19:22:24.111 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:22:24.112 DEBUG 70244 --- [nio-8080-exec-5] c.c.c.s.tenant.TenantContextService      : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Cleared database tenant context
2025-08-23 19:22:58.853 DEBUG 70244 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/auth/login
2025-08-23 19:22:58.854 DEBUG 70244 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:22:58.854 DEBUG 70244 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/auth/login
2025-08-23 19:22:58.854 DEBUG 70244 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:22:58.855 DEBUG 70244 --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:22:58.857 DEBUG 70244 --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:22:58.860  INFO 70244 --- [nio-8080-exec-6] c.c.c.api.controllers.AuthController     : [] Login attempt for email: admin@cafm.local
2025-08-23 19:22:58.861  INFO 70244 --- [nio-8080-exec-6] c.cafm.cafmbackend.service.AuthService   : [] Login attempt for email: admin@cafm.local
2025-08-23 19:22:58.864 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:22:58.869 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:22:58.929 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:22:58.935 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:22:58.941  INFO 70244 --- [nio-8080-exec-6] SECURITY_AUDIT                           : [] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:22:58.941872 - Details: Login successful
2025-08-23 19:22:58.942  INFO 70244 --- [nio-8080-exec-6] c.c.c.api.controllers.AuthController     : [] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:22:58.942 DEBUG 70244 --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:22:58.942 DEBUG 70244 --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:22:58.942 DEBUG 70244 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : [] Completed 200 OK
2025-08-23 19:22:58.998 DEBUG 70244 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Securing POST /api/v1/notifications/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:22:59.000 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:22:59.002 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:22:59.004 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:22:59.006 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:22:59.006 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:22:59.007 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:22:59.008 DEBUG 70244 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Secured POST /api/v1/notifications/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:22:59.008 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:22:59.010 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:22:59.010 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:22:59.011 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:22:59.011  INFO 70244 --- [nio-8080-exec-7] SECURITY                                 : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=POST, uri=/api/v1/notifications/send
2025-08-23 19:22:59.011 DEBUG 70244 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] POST "/api/v1/notifications/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd", parameters={masked}
2025-08-23 19:22:59.011 DEBUG 70244 --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Mapped to com.cafm.cafmbackend.api.controllers.NotificationController#sendInAppNotification(UUID, NotificationRequest)
2025-08-23 19:22:59.020 DEBUG 70244 --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Read "application/json;charset=UTF-8" to [NotificationRequest[userId=null, userIds=null, topic=null, title=Test Notification, body=This is a t (truncated)...]
2025-08-23 19:22:59.024 DEBUG 70244 --- [nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cafm.cafmbackend.api.controllers.NotificationController.sendInAppNotification(java.util.UUID,com.cafm.cafmbackend.dto.notification.NotificationRequest); target is of class [com.cafm.cafmbackend.api.controllers.NotificationController]
2025-08-23 19:22:59.025 DEBUG 70244 --- [nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cafm.cafmbackend.api.controllers.NotificationController.sendInAppNotification(java.util.UUID,com.cafm.cafmbackend.dto.notification.NotificationRequest); target is of class [com.cafm.cafmbackend.api.controllers.NotificationController]
2025-08-23 19:22:59.025  INFO 70244 --- [nio-8080-exec-7] c.c.c.service.NotificationService        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Sending in-app notification to user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:22:59.026 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-08-23 19:22:59.041  INFO 70244 --- [nio-8080-exec-7] c.c.c.service.NotificationService        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] In-app notification sent successfully: 04a6ccbe-7187-41c3-91c5-141c6e9aa144
2025-08-23 19:22:59.042 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    /* insert for
        com.cafm.cafmbackend.data.entity.Notification */insert 
    into
        notifications (body, created_at, data, deleted_at, deleted_by, read, read_at, title, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    /* insert for
        com.cafm.cafmbackend.data.entity.Notification */insert 
    into
        notifications (body, created_at, data, deleted_at, deleted_by, read, read_at, title, user_id, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-23 19:22:59.043 DEBUG 70244 --- [        Async-2] c.c.c.s.tenant.TenantContextService      : [] No tenant context found, using system default
2025-08-23 19:22:59.043 DEBUG 70244 --- [        Async-2] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:22:59.043 DEBUG 70244 --- [        Async-2] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:22:59.044 DEBUG 70244 --- [        Async-2] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:22:59.045 DEBUG 70244 --- [        Async-2] org.hibernate.SQL                        : [] 
    /* insert for
        com.cafm.cafmbackend.data.entity.AuditLog */insert 
    into
        audit_logs (action, api_endpoint, changes, company_id, duration_ms, entity_id, entity_name, entity_type, error_message, http_method, ip_address, new_values, old_values, request_id, response_code, session_id, status, timestamp, user_agent, user_id, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    /* insert for
        com.cafm.cafmbackend.data.entity.AuditLog */insert 
    into
        audit_logs (action, api_endpoint, changes, company_id, duration_ms, entity_id, entity_name, entity_type, error_message, http_method, ip_address, new_values, old_values, request_id, response_code, session_id, status, timestamp, user_agent, user_id, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-23 19:22:59.054 DEBUG 70244 --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:22:59.056 DEBUG 70244 --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Writing [NotificationResponse[id=04a6ccbe-7187-41c3-91c5-141c6e9aa144, userId=0cde87f8-b1a7-4ffc-b0a6-518c46b (truncated)...]
2025-08-23 19:22:59.056 DEBUG 70244 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Completed 201 CREATED
2025-08-23 19:22:59.057 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:22:59.059 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:22:59.060 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Clearing tenant context
2025-08-23 19:22:59.060 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:22:59.061 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Cleared database tenant context
2025-08-23 19:22:59.062 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Clearing tenant context
2025-08-23 19:22:59.062 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:22:59.063 DEBUG 70244 --- [nio-8080-exec-7] c.c.c.s.tenant.TenantContextService      : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Cleared database tenant context
2025-08-23 19:23:23.430 DEBUG 70244 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/notifications/push/send
2025-08-23 19:23:23.430 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:23:23.430 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:23:23.432 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:23:23.433 DEBUG 70244 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:23:23.433  WARN 70244 --- [nio-8080-exec-8] SECURITY_AUDIT                           : [] Authorization DENIED - User: anonymousUser - Decision: AuthorizationDecision [granted=false] - Time: 2025-08-23T19:23:23.433353
2025-08-23 19:23:23.434 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:23:23.436 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:23:23.438 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:23:23.438 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:23:23.439 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:23:37.468 DEBUG 70244 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Securing POST /api/v1/auth/login
2025-08-23 19:23:37.468 DEBUG 70244 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:23:37.469 DEBUG 70244 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Secured POST /api/v1/auth/login
2025-08-23 19:23:37.469 DEBUG 70244 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:23:37.469 DEBUG 70244 --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:23:37.469 DEBUG 70244 --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:23:37.470  INFO 70244 --- [nio-8080-exec-9] c.c.c.api.controllers.AuthController     : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Login attempt for email: admin@cafm.local
2025-08-23 19:23:37.471  INFO 70244 --- [nio-8080-exec-9] c.cafm.cafmbackend.service.AuthService   : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Login attempt for email: admin@cafm.local
2025-08-23 19:23:37.472 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:23:37.474 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:23:37.532 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:23:37.535 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:23:37.540  INFO 70244 --- [nio-8080-exec-9] SECURITY_AUDIT                           : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:23:37.540367 - Details: Login successful
2025-08-23 19:23:37.540  INFO 70244 --- [nio-8080-exec-9] c.c.c.api.controllers.AuthController     : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:23:37.540 DEBUG 70244 --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:23:37.541 DEBUG 70244 --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:23:37.541 DEBUG 70244 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Completed 200 OK
2025-08-23 19:23:37.553 DEBUG 70244 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Securing POST /api/v1/notifications/push/send
2025-08-23 19:23:37.555 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:23:37.557 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:23:37.558 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:23:37.561 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:23:37.561 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:23:37.562 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:23:37.563 DEBUG 70244 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Secured POST /api/v1/notifications/push/send
2025-08-23 19:23:37.563 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:23:37.565 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:23:37.565 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:23:37.567 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:23:37.567  INFO 70244 --- [io-8080-exec-10] SECURITY                                 : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=POST, uri=/api/v1/notifications/push/send
2025-08-23 19:23:37.567 DEBUG 70244 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] POST "/api/v1/notifications/push/send", parameters={}
2025-08-23 19:23:37.567 DEBUG 70244 --- [io-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Mapped to com.cafm.cafmbackend.api.controllers.NotificationController#sendPushNotification(UUID, PushNotificationRequest)
2025-08-23 19:23:37.568 DEBUG 70244 --- [io-8080-exec-10] o.s.web.method.HandlerMethod             : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Could not resolve parameter [0] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> com.cafm.cafmbackend.api.controllers.NotificationController.sendPushNotification(java.util.UUID,com.cafm.cafmbackend.dto.notification.PushNotificationRequest): Required request parameter 'userId' for method parameter type UUID is not present
2025-08-23 19:23:37.568 DEBUG 70244 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : [4420b783-f6ee-427c-8728-8c1bb3ada6aa] Using @ExceptionHandler com.cafm.cafmbackend.exception.GlobalExceptionHandler#handleMissingServletRequestParameterException(MissingServletRequestParameterException, HttpServletRequest)
2025-08-23 19:23:37.568  INFO 70244 --- [io-8080-exec-10] c.c.c.exception.GlobalExceptionHandler   : [13a46862-2126-4a1b-b840-c42e800bd6bb] Request exception: Missing request parameter - Correlation ID: 13a46862-2126-4a1b-b840-c42e800bd6bb - Path: /api/v1/notifications/push/send - Message: Required request parameter 'userId' for method parameter type UUID is not present
2025-08-23 19:23:37.568 DEBUG 70244 --- [io-8080-exec-10] c.c.c.exception.ErrorMessageResolver     : [13a46862-2126-4a1b-b840-c42e800bd6bb] Message key 'error.parameter.missing' not found for locale 'en', using default message
2025-08-23 19:23:37.568 DEBUG 70244 --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [13a46862-2126-4a1b-b840-c42e800bd6bb] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:23:37.568 DEBUG 70244 --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [13a46862-2126-4a1b-b840-c42e800bd6bb] Writing [ErrorResponse[timestamp=2025-08-23T19:23:37.568382, path=/api/v1/notifications/push/send, code=MISSI (truncated)...]
2025-08-23 19:23:37.568 DEBUG 70244 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : [13a46862-2126-4a1b-b840-c42e800bd6bb] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'userId' for method parameter type UUID is not present]
2025-08-23 19:23:37.568 DEBUG 70244 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : [13a46862-2126-4a1b-b840-c42e800bd6bb] Completed 400 BAD_REQUEST
2025-08-23 19:23:37.569 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [13a46862-2126-4a1b-b840-c42e800bd6bb] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:23:37.571 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [13a46862-2126-4a1b-b840-c42e800bd6bb] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:23:37.573 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [13a46862-2126-4a1b-b840-c42e800bd6bb] Clearing tenant context
2025-08-23 19:23:37.573 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [13a46862-2126-4a1b-b840-c42e800bd6bb] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:23:37.574 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [13a46862-2126-4a1b-b840-c42e800bd6bb] Cleared database tenant context
2025-08-23 19:23:37.574 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [13a46862-2126-4a1b-b840-c42e800bd6bb] Clearing tenant context
2025-08-23 19:23:37.574 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [13a46862-2126-4a1b-b840-c42e800bd6bb] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:23:37.575 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [13a46862-2126-4a1b-b840-c42e800bd6bb] Cleared database tenant context
2025-08-23 19:23:54.989 DEBUG 70244 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/notifications/push/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:23:54.991 DEBUG 70244 --- [nio-8080-exec-1] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:23:54.992 DEBUG 70244 --- [nio-8080-exec-1] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:23:54.994 DEBUG 70244 --- [nio-8080-exec-1] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:23:54.995 DEBUG 70244 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:23:54.995  WARN 70244 --- [nio-8080-exec-1] SECURITY_AUDIT                           : [] Authorization DENIED - User: anonymousUser - Decision: AuthorizationDecision [granted=false] - Time: 2025-08-23T19:23:54.995739
2025-08-23 19:23:54.997 DEBUG 70244 --- [nio-8080-exec-1] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:23:55.004 DEBUG 70244 --- [nio-8080-exec-1] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:23:55.006 DEBUG 70244 --- [nio-8080-exec-1] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:23:55.006 DEBUG 70244 --- [nio-8080-exec-1] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:23:55.007 DEBUG 70244 --- [nio-8080-exec-1] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:24:08.396 DEBUG 70244 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : [99710973-ad82-474a-82fd-a751375d7a9b] Securing POST /api/v1/auth/login
2025-08-23 19:24:08.397 DEBUG 70244 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : [99710973-ad82-474a-82fd-a751375d7a9b] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:24:08.397 DEBUG 70244 --- [nio-8080-exec-2] o.s.security.web.FilterChainProxy        : [99710973-ad82-474a-82fd-a751375d7a9b] Secured POST /api/v1/auth/login
2025-08-23 19:24:08.398 DEBUG 70244 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : [99710973-ad82-474a-82fd-a751375d7a9b] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:24:08.398 DEBUG 70244 --- [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : [99710973-ad82-474a-82fd-a751375d7a9b] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:24:08.398 DEBUG 70244 --- [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : [99710973-ad82-474a-82fd-a751375d7a9b] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:24:08.399  INFO 70244 --- [nio-8080-exec-2] c.c.c.api.controllers.AuthController     : [99710973-ad82-474a-82fd-a751375d7a9b] Login attempt for email: admin@cafm.local
2025-08-23 19:24:08.400  INFO 70244 --- [nio-8080-exec-2] c.cafm.cafmbackend.service.AuthService   : [99710973-ad82-474a-82fd-a751375d7a9b] Login attempt for email: admin@cafm.local
2025-08-23 19:24:08.402 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [99710973-ad82-474a-82fd-a751375d7a9b] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:24:08.404 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [99710973-ad82-474a-82fd-a751375d7a9b] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:24:08.461 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [99710973-ad82-474a-82fd-a751375d7a9b] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:24:08.464 DEBUG 70244 --- [nio-8080-exec-2] org.hibernate.SQL                        : [99710973-ad82-474a-82fd-a751375d7a9b] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:24:08.470  INFO 70244 --- [nio-8080-exec-2] SECURITY_AUDIT                           : [99710973-ad82-474a-82fd-a751375d7a9b] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:24:08.470104 - Details: Login successful
2025-08-23 19:24:08.470  INFO 70244 --- [nio-8080-exec-2] c.c.c.api.controllers.AuthController     : [99710973-ad82-474a-82fd-a751375d7a9b] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:24:08.470 DEBUG 70244 --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [99710973-ad82-474a-82fd-a751375d7a9b] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:24:08.470 DEBUG 70244 --- [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [99710973-ad82-474a-82fd-a751375d7a9b] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:24:08.471 DEBUG 70244 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : [99710973-ad82-474a-82fd-a751375d7a9b] Completed 200 OK
2025-08-23 19:24:08.484 DEBUG 70244 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Securing POST /api/v1/notifications/push/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:24:08.485 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:24:08.492 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:24:08.494 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:24:08.496 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:24:08.496 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:24:08.497 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:24:08.497 DEBUG 70244 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Secured POST /api/v1/notifications/push/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:24:08.497 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:24:08.499 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:24:08.499 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:24:08.500 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:24:08.500  INFO 70244 --- [nio-8080-exec-3] SECURITY                                 : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=POST, uri=/api/v1/notifications/push/send
2025-08-23 19:24:08.500 DEBUG 70244 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] POST "/api/v1/notifications/push/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd", parameters={masked}
2025-08-23 19:24:08.500 DEBUG 70244 --- [nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Mapped to com.cafm.cafmbackend.api.controllers.NotificationController#sendPushNotification(UUID, PushNotificationRequest)
2025-08-23 19:24:08.509 DEBUG 70244 --- [nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Read "application/json;charset=UTF-8" to [PushNotificationRequest[targetType=null, deviceTokens=null, userIds=null, groupIds=null, topic=null, (truncated)...]
2025-08-23 19:24:08.511 DEBUG 70244 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : [b03099f9-fddf-4dc7-a75a-4f79d81bd0cc] Using @ExceptionHandler com.cafm.cafmbackend.exception.GlobalExceptionHandler#handleMethodArgumentNotValidException(MethodArgumentNotValidException, HttpServletRequest)
2025-08-23 19:24:08.511  INFO 70244 --- [nio-8080-exec-3] c.c.c.exception.GlobalExceptionHandler   : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] Validation exception: Method argument validation failed - Correlation ID: 8cd5bebb-f4c9-4c46-a676-e70a8e028b47 - Path: /api/v1/notifications/push/send - Errors: 2 - Message: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> com.cafm.cafmbackend.api.controllers.NotificationController.sendPushNotification(java.util.UUID,com.cafm.cafmbackend.dto.notification.PushNotificationRequest) with 2 errors: [Field error in object 'pushNotificationRequest' on field 'targetType': rejected value [null]; codes [NotNull.pushNotificationRequest.targetType,NotNull.targetType,NotNull.com.cafm.cafmbackend.dto.notification.PushNotificationRequest$TargetType,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pushNotificationRequest.targetType,targetType]; arguments []; default message [targetType]]; default message [Target type is required]] [Field error in object 'pushNotificationRequest' on field 'notification': rejected value [null]; codes [NotNull.pushNotificationRequest.notification,NotNull.notification,NotNull.com.cafm.cafmbackend.dto.notification.PushNotificationRequest$NotificationContent,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pushNotificationRequest.notification,notification]; arguments []; default message [notification]]; default message [Notification is required]] 
2025-08-23 19:24:08.512 DEBUG 70244 --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:24:08.512 DEBUG 70244 --- [nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] Writing [ErrorResponse[timestamp=2025-08-23T19:24:08.512080, path=/api/v1/notifications/push/send, code=VALID (truncated)...]
2025-08-23 19:24:08.512 DEBUG 70244 --- [nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> com.cafm.cafmbackend.api.controllers.NotificationController.sendPushNotification(java.util.UUID,com.cafm.cafmbackend.dto.notification.PushNotificationRequest) with 2 errors: [Field error in object 'pushNotificationRequest' on field 'targetType': rejected value [null]; codes [NotNull.pushNotificationRequest.targetType,NotNull.targetType,NotNull.com.cafm.cafmbackend.dto.notification.PushNotificationRequest$TargetType,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pushNotificationRequest.targetType,targetType]; arguments []; default message [targetType]]; default message [Target type is required]] [Field error in object 'pushNotificationRequest' on field 'notification': rejected value [null]; codes [NotNull.pushNotificationRequest.notification,NotNull.notification,NotNull.com.cafm.cafmbackend.dto.notification.PushNotificationRequest$NotificationContent,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pushNotificationRequest.notification,notification]; arguments []; default message [notification]]; default message [Notification is required]] ]
2025-08-23 19:24:08.512 DEBUG 70244 --- [nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] Completed 400 BAD_REQUEST
2025-08-23 19:24:08.513 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:24:08.515 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:24:08.516 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] Clearing tenant context
2025-08-23 19:24:08.516 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:24:08.517 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] Cleared database tenant context
2025-08-23 19:24:08.518 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] Clearing tenant context
2025-08-23 19:24:08.518 DEBUG 70244 --- [nio-8080-exec-3] org.hibernate.SQL                        : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:24:08.519 DEBUG 70244 --- [nio-8080-exec-3] c.c.c.s.tenant.TenantContextService      : [8cd5bebb-f4c9-4c46-a676-e70a8e028b47] Cleared database tenant context
2025-08-23 19:24:19.687 DEBUG 70244 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/notifications/push/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:24:19.687 DEBUG 70244 --- [nio-8080-exec-4] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:24:19.688 DEBUG 70244 --- [nio-8080-exec-4] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:24:19.689 DEBUG 70244 --- [nio-8080-exec-4] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:24:19.690 DEBUG 70244 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : [] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:24:19.690  WARN 70244 --- [nio-8080-exec-4] SECURITY_AUDIT                           : [] Authorization DENIED - User: anonymousUser - Decision: AuthorizationDecision [granted=false] - Time: 2025-08-23T19:24:19.690404
2025-08-23 19:24:19.691 DEBUG 70244 --- [nio-8080-exec-4] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:24:19.693 DEBUG 70244 --- [nio-8080-exec-4] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:24:19.695 DEBUG 70244 --- [nio-8080-exec-4] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:24:19.695 DEBUG 70244 --- [nio-8080-exec-4] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:24:19.696 DEBUG 70244 --- [nio-8080-exec-4] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:24:34.041 DEBUG 70244 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Securing POST /api/v1/auth/login
2025-08-23 19:24:34.042 DEBUG 70244 --- [nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:24:34.042 DEBUG 70244 --- [nio-8080-exec-5] o.s.security.web.FilterChainProxy        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Secured POST /api/v1/auth/login
2025-08-23 19:24:34.042 DEBUG 70244 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:24:34.042 DEBUG 70244 --- [nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:24:34.043 DEBUG 70244 --- [nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:24:34.043  INFO 70244 --- [nio-8080-exec-5] c.c.c.api.controllers.AuthController     : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Login attempt for email: admin@cafm.local
2025-08-23 19:24:34.044  INFO 70244 --- [nio-8080-exec-5] c.cafm.cafmbackend.service.AuthService   : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Login attempt for email: admin@cafm.local
2025-08-23 19:24:34.046 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:24:34.051 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:24:34.116 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:24:34.119 DEBUG 70244 --- [nio-8080-exec-5] org.hibernate.SQL                        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:24:34.122  INFO 70244 --- [nio-8080-exec-5] SECURITY_AUDIT                           : [f4f1f232-f294-4272-9d49-e1583c64d2d3] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:24:34.122285 - Details: Login successful
2025-08-23 19:24:34.122  INFO 70244 --- [nio-8080-exec-5] c.c.c.api.controllers.AuthController     : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:24:34.122 DEBUG 70244 --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:24:34.122 DEBUG 70244 --- [nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:24:34.123 DEBUG 70244 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : [f4f1f232-f294-4272-9d49-e1583c64d2d3] Completed 200 OK
2025-08-23 19:24:34.134 DEBUG 70244 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/notifications/push/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:24:34.136 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:24:34.137 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:24:34.138 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:24:34.139 DEBUG 70244 --- [nio-8080-exec-6] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:24:34.139 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:24:34.139 DEBUG 70244 --- [nio-8080-exec-6] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:24:34.140 DEBUG 70244 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/notifications/push/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:24:34.140 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:24:34.141 DEBUG 70244 --- [nio-8080-exec-6] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:24:34.141 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:24:34.142 DEBUG 70244 --- [nio-8080-exec-6] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:24:34.142  INFO 70244 --- [nio-8080-exec-6] SECURITY                                 : [] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=POST, uri=/api/v1/notifications/push/send
2025-08-23 19:24:34.142 DEBUG 70244 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/notifications/push/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd", parameters={masked}
2025-08-23 19:24:34.142 DEBUG 70244 --- [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.NotificationController#sendPushNotification(UUID, PushNotificationRequest)
2025-08-23 19:24:34.143 DEBUG 70244 --- [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [PushNotificationRequest[targetType=null, deviceTokens=null, userIds=null, groupIds=null, topic=null, (truncated)...]
2025-08-23 19:24:34.143 DEBUG 70244 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : [] Using @ExceptionHandler com.cafm.cafmbackend.exception.GlobalExceptionHandler#handleMethodArgumentNotValidException(MethodArgumentNotValidException, HttpServletRequest)
2025-08-23 19:24:34.143  INFO 70244 --- [nio-8080-exec-6] c.c.c.exception.GlobalExceptionHandler   : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] Validation exception: Method argument validation failed - Correlation ID: 8ae90703-a5ca-41ae-bdcc-9015d8b79a5f - Path: /api/v1/notifications/push/send - Errors: 2 - Message: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> com.cafm.cafmbackend.api.controllers.NotificationController.sendPushNotification(java.util.UUID,com.cafm.cafmbackend.dto.notification.PushNotificationRequest) with 2 errors: [Field error in object 'pushNotificationRequest' on field 'targetType': rejected value [null]; codes [NotNull.pushNotificationRequest.targetType,NotNull.targetType,NotNull.com.cafm.cafmbackend.dto.notification.PushNotificationRequest$TargetType,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pushNotificationRequest.targetType,targetType]; arguments []; default message [targetType]]; default message [Target type is required]] [Field error in object 'pushNotificationRequest' on field 'notification': rejected value [null]; codes [NotNull.pushNotificationRequest.notification,NotNull.notification,NotNull.com.cafm.cafmbackend.dto.notification.PushNotificationRequest$NotificationContent,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pushNotificationRequest.notification,notification]; arguments []; default message [notification]]; default message [Notification is required]] 
2025-08-23 19:24:34.143 DEBUG 70244 --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:24:34.144 DEBUG 70244 --- [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] Writing [ErrorResponse[timestamp=2025-08-23T19:24:34.143826, path=/api/v1/notifications/push/send, code=VALID (truncated)...]
2025-08-23 19:24:34.144 DEBUG 70244 --- [nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> com.cafm.cafmbackend.api.controllers.NotificationController.sendPushNotification(java.util.UUID,com.cafm.cafmbackend.dto.notification.PushNotificationRequest) with 2 errors: [Field error in object 'pushNotificationRequest' on field 'targetType': rejected value [null]; codes [NotNull.pushNotificationRequest.targetType,NotNull.targetType,NotNull.com.cafm.cafmbackend.dto.notification.PushNotificationRequest$TargetType,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pushNotificationRequest.targetType,targetType]; arguments []; default message [targetType]]; default message [Target type is required]] [Field error in object 'pushNotificationRequest' on field 'notification': rejected value [null]; codes [NotNull.pushNotificationRequest.notification,NotNull.notification,NotNull.com.cafm.cafmbackend.dto.notification.PushNotificationRequest$NotificationContent,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [pushNotificationRequest.notification,notification]; arguments []; default message [notification]]; default message [Notification is required]] ]
2025-08-23 19:24:34.144 DEBUG 70244 --- [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] Completed 400 BAD_REQUEST
2025-08-23 19:24:34.144 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:24:34.146 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:24:34.147 DEBUG 70244 --- [nio-8080-exec-6] c.c.c.s.tenant.TenantContextService      : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] Clearing tenant context
2025-08-23 19:24:34.147 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:24:34.147 DEBUG 70244 --- [nio-8080-exec-6] c.c.c.s.tenant.TenantContextService      : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] Cleared database tenant context
2025-08-23 19:24:34.148 DEBUG 70244 --- [nio-8080-exec-6] c.c.c.s.tenant.TenantContextService      : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] Clearing tenant context
2025-08-23 19:24:34.148 DEBUG 70244 --- [nio-8080-exec-6] org.hibernate.SQL                        : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:24:34.148 DEBUG 70244 --- [nio-8080-exec-6] c.c.c.s.tenant.TenantContextService      : [8ae90703-a5ca-41ae-bdcc-9015d8b79a5f] Cleared database tenant context
2025-08-23 19:25:04.135 DEBUG 70244 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Securing POST /api/v1/auth/login
2025-08-23 19:25:04.136 DEBUG 70244 --- [nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:25:04.136 DEBUG 70244 --- [nio-8080-exec-7] o.s.security.web.FilterChainProxy        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Secured POST /api/v1/auth/login
2025-08-23 19:25:04.136 DEBUG 70244 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:25:04.136 DEBUG 70244 --- [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:25:04.137 DEBUG 70244 --- [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:25:04.137  INFO 70244 --- [nio-8080-exec-7] c.c.c.api.controllers.AuthController     : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Login attempt for email: admin@cafm.local
2025-08-23 19:25:04.138  INFO 70244 --- [nio-8080-exec-7] c.cafm.cafmbackend.service.AuthService   : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Login attempt for email: admin@cafm.local
2025-08-23 19:25:04.139 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:25:04.140 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:25:04.197 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:25:04.199 DEBUG 70244 --- [nio-8080-exec-7] org.hibernate.SQL                        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:25:04.201  INFO 70244 --- [nio-8080-exec-7] SECURITY_AUDIT                           : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:25:04.201711 - Details: Login successful
2025-08-23 19:25:04.201  INFO 70244 --- [nio-8080-exec-7] c.c.c.api.controllers.AuthController     : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:25:04.202 DEBUG 70244 --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:25:04.202 DEBUG 70244 --- [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:25:04.202 DEBUG 70244 --- [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : [e4db0ec4-10db-4c7d-bf0c-fec9b27640c2] Completed 200 OK
2025-08-23 19:25:04.214 DEBUG 70244 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : [] Securing POST /api/v1/notifications/push/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:25:04.216 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:25:04.217 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:25:04.219 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:25:04.220 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:25:04.220 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:25:04.221 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:25:04.222 DEBUG 70244 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : [] Secured POST /api/v1/notifications/push/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:25:04.223 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:25:04.224 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:25:04.224 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:25:04.225 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:25:04.225  INFO 70244 --- [nio-8080-exec-8] SECURITY                                 : [] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=POST, uri=/api/v1/notifications/push/send
2025-08-23 19:25:04.225 DEBUG 70244 --- [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : [] POST "/api/v1/notifications/push/send?userId=0cde87f8-b1a7-4ffc-b0a6-518c46b394dd", parameters={masked}
2025-08-23 19:25:04.225 DEBUG 70244 --- [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : [] Mapped to com.cafm.cafmbackend.api.controllers.NotificationController#sendPushNotification(UUID, PushNotificationRequest)
2025-08-23 19:25:04.229 DEBUG 70244 --- [nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : [] Read "application/json;charset=UTF-8" to [PushNotificationRequest[targetType=USER, deviceTokens=null, userIds=[0cde87f8-b1a7-4ffc-b0a6-518c46b (truncated)...]
2025-08-23 19:25:04.229 DEBUG 70244 --- [nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : [] Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cafm.cafmbackend.api.controllers.NotificationController.sendPushNotification(java.util.UUID,com.cafm.cafmbackend.dto.notification.PushNotificationRequest); target is of class [com.cafm.cafmbackend.api.controllers.NotificationController]
2025-08-23 19:25:04.230 DEBUG 70244 --- [nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : [] Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cafm.cafmbackend.api.controllers.NotificationController.sendPushNotification(java.util.UUID,com.cafm.cafmbackend.dto.notification.PushNotificationRequest); target is of class [com.cafm.cafmbackend.api.controllers.NotificationController]
2025-08-23 19:25:04.232 DEBUG 70244 --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:25:04.232 DEBUG 70244 --- [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [] Writing [{message=Push notification queued for delivery, status=queued, userId=0cde87f8-b1a7-4ffc-b0a6-518c46 (truncated)...]
2025-08-23 19:25:04.232  INFO 70244 --- [     virtual-77] c.c.c.service.NotificationService        : [] Sending push notification to user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:25:04.233 DEBUG 70244 --- [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : [] Completed 202 ACCEPTED
2025-08-23 19:25:04.233 DEBUG 70244 --- [     virtual-77] org.hibernate.SQL                        : [] 
    select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-08-23 19:25:04.234 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:25:04.236 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:25:04.236 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:25:04.237 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:25:04.238 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:25:04.238 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Clearing tenant context
2025-08-23 19:25:04.238 DEBUG 70244 --- [     virtual-77] org.hibernate.SQL                        : [] 
    /* <criteria> */ select
        f1_0.id,
        f1_0.is_active,
        f1_0.company_id,
        f1_0.created_at,
        f1_0.created_by,
        f1_0.device_id,
        f1_0.modified_by,
        f1_0.platform,
        f1_0.fcm_token,
        f1_0.updated_at,
        f1_0.user_id,
        f1_0.version 
    from
        user_fcm_tokens f1_0 
    where
        f1_0.user_id=? 
        and f1_0.is_active=?
Hibernate: 
    /* <criteria> */ select
        f1_0.id,
        f1_0.is_active,
        f1_0.company_id,
        f1_0.created_at,
        f1_0.created_by,
        f1_0.device_id,
        f1_0.modified_by,
        f1_0.platform,
        f1_0.fcm_token,
        f1_0.updated_at,
        f1_0.user_id,
        f1_0.version 
    from
        user_fcm_tokens f1_0 
    where
        f1_0.user_id=? 
        and f1_0.is_active=?
2025-08-23 19:25:04.238 DEBUG 70244 --- [nio-8080-exec-8] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:25:04.239 DEBUG 70244 --- [nio-8080-exec-8] c.c.c.s.tenant.TenantContextService      : [] Cleared database tenant context
2025-08-23 19:25:04.244  WARN 70244 --- [     virtual-77] o.h.engine.jdbc.spi.SqlExceptionHelper   : [] SQL Error: 0, SQLState: 42703
2025-08-23 19:25:04.244 ERROR 70244 --- [     virtual-77] o.h.engine.jdbc.spi.SqlExceptionHelper   : [] ERROR: column f1_0.created_by does not exist
  Hint: Perhaps you meant to reference the column "f1_0.created_at".
  Position: 80
2025-08-23 19:25:04.248 ERROR 70244 --- [     virtual-77] c.c.c.service.NotificationService        : [] Failed to send push notification to user 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd: JDBC exception executing SQL [/* <criteria> */ select f1_0.id,f1_0.is_active,f1_0.company_id,f1_0.created_at,f1_0.created_by,f1_0.device_id,f1_0.modified_by,f1_0.platform,f1_0.fcm_token,f1_0.updated_at,f1_0.user_id,f1_0.version from user_fcm_tokens f1_0 where f1_0.user_id=? and f1_0.is_active=?] [ERROR: column f1_0.created_by does not exist
  Hint: Perhaps you meant to reference the column "f1_0.created_at".
  Position: 80] [n/a]; SQL [n/a]

org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing SQL [/* <criteria> */ select f1_0.id,f1_0.is_active,f1_0.company_id,f1_0.created_at,f1_0.created_by,f1_0.device_id,f1_0.modified_by,f1_0.platform,f1_0.fcm_token,f1_0.updated_at,f1_0.user_id,f1_0.version from user_fcm_tokens f1_0 where f1_0.user_id=? and f1_0.is_active=?] [ERROR: column f1_0.created_by does not exist
  Hint: Perhaps you meant to reference the column "f1_0.created_at".
  Position: 80] [n/a]; SQL [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy292.findByUserIdAndActive(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.cafm.cafmbackend.aspect.PerformanceMonitoringAspect.monitorRepositoryPerformance(PerformanceMonitoringAspect.java:105)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy292.findByUserIdAndActive(Unknown Source)
	at com.cafm.cafmbackend.service.NotificationService.lambda$sendPushNotification$0(NotificationService.java:232)
	at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1848)
	at java.base/java.util.concurrent.ThreadPerTaskExecutor$TaskRunner.run(ThreadPerTaskExecutor.java:314)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329)
Caused by: org.hibernate.exception.SQLGrammarException: JDBC exception executing SQL [/* <criteria> */ select f1_0.id,f1_0.is_active,f1_0.company_id,f1_0.created_at,f1_0.created_by,f1_0.device_id,f1_0.modified_by,f1_0.platform,f1_0.fcm_token,f1_0.updated_at,f1_0.user_id,f1_0.version from user_fcm_tokens f1_0 where f1_0.user_id=? and f1_0.is_active=?] [ERROR: column f1_0.created_by does not exist
  Hint: Perhaps you meant to reference the column "f1_0.created_at".
  Position: 80] [n/a]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:91)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:264)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:265)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:145)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:67)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:204)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:211)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:139)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:382)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:302)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:526)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:423)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:418)
	at jdk.proxy2/jdk.proxy2.$Proxy342.getResultList(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:169)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:148)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 30 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: column f1_0.created_by does not exist
  Hint: Perhaps you meant to reference the column "f1_0.created_at".
  Position: 80
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:246)
	... 66 common frames omitted

2025-08-23 19:25:04.778 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] HTTP POST http://localhost:9411/api/v2/spans
2025-08-23 19:25:04.779 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Accept=[application/json, application/*+json]
2025-08-23 19:25:04.779 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Writing [[B@878fd61] as "application/json"
2025-08-23 19:26:09.015 DEBUG 70244 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Securing POST /api/v1/auth/login
2025-08-23 19:26:09.017 DEBUG 70244 --- [nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Set SecurityContextHolder to anonymous SecurityContext
2025-08-23 19:26:09.017 DEBUG 70244 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Secured POST /api/v1/auth/login
2025-08-23 19:26:09.018 DEBUG 70244 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] POST "/api/v1/auth/login", parameters={}
2025-08-23 19:26:09.018 DEBUG 70244 --- [nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Mapped to com.cafm.cafmbackend.api.controllers.AuthController#login(LoginRequest, HttpServletRequest)
2025-08-23 19:26:09.021 DEBUG 70244 --- [nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Read "application/json;charset=UTF-8" to [LoginRequest[email=admin@cafm.local, password=admin123, deviceId=null, deviceName=null, ipAddress=nu (truncated)...]
2025-08-23 19:26:09.022  INFO 70244 --- [nio-8080-exec-9] c.c.c.api.controllers.AuthController     : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Login attempt for email: admin@cafm.local
2025-08-23 19:26:09.027  INFO 70244 --- [nio-8080-exec-9] c.cafm.cafmbackend.service.AuthService   : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Login attempt for email: admin@cafm.local
2025-08-23 19:26:09.031 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        upper(u1_0.email)=upper(?)
2025-08-23 19:26:09.038 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:26:09.094 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:26:09.099 DEBUG 70244 --- [nio-8080-exec-9] org.hibernate.SQL                        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
Hibernate: 
    /* UPDATE
        User u 
    SET
        u.lastLoginAt = :loginTime 
    WHERE
        u.id = :userId */ update users u1_0 
    set
        last_login_at=? 
    where
        u1_0.id=?
2025-08-23 19:26:09.106  INFO 70244 --- [nio-8080-exec-9] SECURITY_AUDIT                           : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] SECURITY_EVENT - Type: LOGIN_ATTEMPT - User: admin@cafm.local - IP: 0:0:0:0:0:0:0:1 - Success: true - Time: 2025-08-23T19:26:09.106287 - Details: Login successful
2025-08-23 19:26:09.106  INFO 70244 --- [nio-8080-exec-9] c.c.c.api.controllers.AuthController     : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Successful login for user: 0cde87f8-b1a7-4ffc-b0a6-518c46b394dd
2025-08-23 19:26:09.106 DEBUG 70244 --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:26:09.107 DEBUG 70244 --- [nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Writing [LoginResponse[accessToken=eyJhbGciOiJIUzUxMiJ9.eyJjb21wYW55SWQiOiIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wM (truncated)...]
2025-08-23 19:26:09.107 DEBUG 70244 --- [nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : [0c2a8a29-e02d-44d9-ab76-ca6a1dfad49f] Completed 200 OK
2025-08-23 19:26:09.124 DEBUG 70244 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : [13a46862-2126-4a1b-b840-c42e800bd6bb] Securing POST /api/v1/test/send-email
2025-08-23 19:26:09.126 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [13a46862-2126-4a1b-b840-c42e800bd6bb] 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        u1_0.admin_id,
        u1_0.auth_user_id,
        u1_0.avatar_url,
        u1_0.bio,
        u1_0.certifications,
        u1_0.city,
        u1_0.company_id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.deleted_at,
        u1_0.deleted_by,
        u1_0.deletion_reason,
        u1_0.department,
        u1_0.email,
        u1_0.email_verified,
        u1_0.email_verified_at,
        u1_0.employee_id,
        u1_0.failed_login_attempts,
        u1_0.first_name,
        (COALESCE(u1_0.first_name, '') || ' ' || COALESCE(u1_0.last_name, '')),
        u1_0.hourly_rate,
        u1_0.iqama_id,
        u1_0.is_active,
        u1_0.is_available_for_assignment,
        u1_0.is_locked,
        u1_0.last_login_at,
        u1_0.last_login_ip,
        u1_0.last_name,
        u1_0.modified_by,
        u1_0.password_change_required,
        u1_0.password_changed_at,
        u1_0.password_hash,
        u1_0.performance_rating,
        u1_0.phone,
        u1_0.phone_verified,
        u1_0.plate_letters_ar,
        u1_0.plate_letters_en,
        u1_0.plate_number,
        u1_0.position,
        u1_0.postal_code,
        u1_0.productivity_score,
        u1_0.skill_level,
        u1_0.specialization,
        u1_0.status,
        u1_0.technicians_detailed,
        u1_0.updated_at,
        u1_0.user_type,
        u1_0.username,
        u1_0.verification_code,
        u1_0.verification_code_expiry,
        u1_0.version,
        u1_0.years_of_experience 
    from
        users u1_0 
    where
        u1_0.email=?
2025-08-23 19:26:09.128 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [13a46862-2126-4a1b-b840-c42e800bd6bb] 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
Hibernate: 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.created_at,
        r1_1.created_by,
        r1_1.description,
        r1_1.modified_by,
        r1_1.name,
        r1_1.updated_at,
        r1_1.version 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-08-23 19:26:09.132 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [13a46862-2126-4a1b-b840-c42e800bd6bb] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:26:09.134 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [13a46862-2126-4a1b-b840-c42e800bd6bb] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:26:09.134 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [13a46862-2126-4a1b-b840-c42e800bd6bb] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:26:09.135 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [13a46862-2126-4a1b-b840-c42e800bd6bb] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:26:09.136 DEBUG 70244 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : [13a46862-2126-4a1b-b840-c42e800bd6bb] Secured POST /api/v1/test/send-email
2025-08-23 19:26:09.136 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [13a46862-2126-4a1b-b840-c42e800bd6bb] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:26:09.138 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [13a46862-2126-4a1b-b840-c42e800bd6bb] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:26:09.138 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [13a46862-2126-4a1b-b840-c42e800bd6bb] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:26:09.139 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [13a46862-2126-4a1b-b840-c42e800bd6bb] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:26:09.139  INFO 70244 --- [io-8080-exec-10] SECURITY                                 : [13a46862-2126-4a1b-b840-c42e800bd6bb] TENANT_ACCESS: tenant=00000000-0000-0000-0000-000000000001, source=jwt, ip=0:0:0:0:0:0:0:1, session=null, user=admin@cafm.local, method=POST, uri=/api/v1/test/send-email
2025-08-23 19:26:09.139 DEBUG 70244 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : [13a46862-2126-4a1b-b840-c42e800bd6bb] POST "/api/v1/test/send-email", parameters={}
2025-08-23 19:26:09.140 DEBUG 70244 --- [io-8080-exec-10] o.s.w.s.handler.SimpleUrlHandlerMapping  : [13a46862-2126-4a1b-b840-c42e800bd6bb] Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-08-23 19:26:09.141 DEBUG 70244 --- [io-8080-exec-10] o.s.w.s.r.ResourceHttpRequestHandler     : [13a46862-2126-4a1b-b840-c42e800bd6bb] Resource not found
2025-08-23 19:26:09.142 DEBUG 70244 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : [13a46862-2126-4a1b-b840-c42e800bd6bb] Using @ExceptionHandler com.cafm.cafmbackend.exception.GlobalExceptionHandler#handleGenericException(Exception, HttpServletRequest)
2025-08-23 19:26:09.142 ERROR 70244 --- [io-8080-exec-10] c.c.c.exception.GlobalExceptionHandler   : [4bc6804a-edd1-4594-9115-67397c2de737] Internal server error - Correlation ID: 4bc6804a-edd1-4594-9115-67397c2de737 - Path: /api/v1/test/send-email - Exception: NoResourceFoundException

org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/test/send-email.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cafm.cafmbackend.security.SecurityHeadersConfig$CustomSecurityHeadersFilter.doFilterInternal(SecurityHeadersConfig.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cafm.cafmbackend.config.PerformanceOptimizationConfig.lambda$compressionFilter$0(PerformanceOptimizationConfig.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ShallowEtagHeaderFilter.doFilterInternal(ShallowEtagHeaderFilter.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cafm.cafmbackend.security.filter.ApiKeyAuthenticationFilter.doFilterInternal(ApiKeyAuthenticationFilter.java:65)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cafm.cafmbackend.security.filter.EnhancedTenantSecurityFilter.doFilterInternal(EnhancedTenantSecurityFilter.java:112)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cafm.cafmbackend.security.filter.RequestBodyCachingFilter.doFilterInternal(RequestBodyCachingFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.cafm.cafmbackend.security.filter.TenantSecurityFilter.doFilterInternal(TenantSecurityFilter.java:79)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.cafm.cafmbackend.security.filter.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.cafm.cafmbackend.security.filter.RateLimitingFilter.doFilterInternal(RateLimitingFilter.java:102)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:113)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)

2025-08-23 19:26:09.142 DEBUG 70244 --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [4bc6804a-edd1-4594-9115-67397c2de737] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-08-23 19:26:09.142 DEBUG 70244 --- [        Async-4] c.c.c.s.tenant.TenantContextService      : [] No tenant context found, using system default
2025-08-23 19:26:09.142 DEBUG 70244 --- [        Async-4] c.c.c.s.tenant.TenantContextService      : [] Setting tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:26:09.143 DEBUG 70244 --- [io-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : [4bc6804a-edd1-4594-9115-67397c2de737] Writing [ErrorResponse[timestamp=2025-08-23T19:26:09.142775, path=/api/v1/test/send-email, code=INTERNAL_SERV (truncated)...]
2025-08-23 19:26:09.143 DEBUG 70244 --- [        Async-4] org.hibernate.SQL                        : [] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:26:09.143 DEBUG 70244 --- [io-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : [4bc6804a-edd1-4594-9115-67397c2de737] Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/v1/test/send-email.]
2025-08-23 19:26:09.143 DEBUG 70244 --- [io-8080-exec-10] o.s.web.servlet.DispatcherServlet        : [4bc6804a-edd1-4594-9115-67397c2de737] Completed 500 INTERNAL_SERVER_ERROR
2025-08-23 19:26:09.144 DEBUG 70244 --- [        Async-4] c.c.c.s.tenant.TenantContextService      : [] Set database tenant context to: 00000000-0000-0000-0000-000000000001
2025-08-23 19:26:09.144  WARN 70244 --- [        Async-4] c.cafm.cafmbackend.service.AuditService  : [] Security event: ERROR - Internal server error: NoResourceFoundException at /api/v1/test/send-email - Correlation ID: 4bc6804a-edd1-4594-9115-67397c2de737
2025-08-23 19:26:09.145 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [4bc6804a-edd1-4594-9115-67397c2de737] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:26:09.145 DEBUG 70244 --- [        Async-4] org.hibernate.SQL                        : [] 
    /* insert for
        com.cafm.cafmbackend.data.entity.AuditLog */insert 
    into
        audit_logs (action, api_endpoint, changes, company_id, duration_ms, entity_id, entity_name, entity_type, error_message, http_method, ip_address, new_values, old_values, request_id, response_code, session_id, status, timestamp, user_agent, user_id, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    /* insert for
        com.cafm.cafmbackend.data.entity.AuditLog */insert 
    into
        audit_logs (action, api_endpoint, changes, company_id, duration_ms, entity_id, entity_name, entity_type, error_message, http_method, ip_address, new_values, old_values, request_id, response_code, session_id, status, timestamp, user_agent, user_id, username, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-23 19:26:09.147 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [4bc6804a-edd1-4594-9115-67397c2de737] 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.address,
        c1_0.city,
        c1_0.commercial_registration,
        c1_0.compliance_requirements,
        c1_0.contact_email,
        c1_0.contact_phone,
        c1_0.country,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.currency,
        c1_0.data_classification,
        c1_0.deleted_at,
        c1_0.deleted_by,
        c1_0.deletion_reason,
        c1_0.display_name,
        c1_0.domain,
        c1_0.features,
        c1_0.industry,
        c1_0.is_active,
        c1_0.locale,
        c1_0.max_schools,
        c1_0.max_storage_gb,
        c1_0.max_supervisors,
        c1_0.max_technicians,
        c1_0.max_users,
        c1_0.modified_by,
        c1_0.name,
        c1_0.postal_code,
        c1_0.primary_contact_name,
        c1_0.settings,
        c1_0.status,
        c1_0.subdomain,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.tax_number,
        c1_0.timezone,
        c1_0.updated_at,
        c1_0.version 
    from
        companies c1_0 
    where
        c1_0.id=?
2025-08-23 19:26:09.148 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [4bc6804a-edd1-4594-9115-67397c2de737] Clearing tenant context
2025-08-23 19:26:09.148 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [4bc6804a-edd1-4594-9115-67397c2de737] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:26:09.149 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [4bc6804a-edd1-4594-9115-67397c2de737] Cleared database tenant context
2025-08-23 19:26:09.150 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [4bc6804a-edd1-4594-9115-67397c2de737] Clearing tenant context
2025-08-23 19:26:09.150 DEBUG 70244 --- [io-8080-exec-10] org.hibernate.SQL                        : [4bc6804a-edd1-4594-9115-67397c2de737] 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
Hibernate: 
    /* dynamic native SQL query */ SELECT
        set_config(?, ?, false)
2025-08-23 19:26:09.151 DEBUG 70244 --- [io-8080-exec-10] c.c.c.s.tenant.TenantContextService      : [4bc6804a-edd1-4594-9115-67397c2de737] Cleared database tenant context
2025-08-23 19:27:29.168 DEBUG 70244 --- [ionShutdownHook] o.s.d.r.l.RedisMessageListenerContainer  : [] Stopped RedisMessageListenerContainer
2025-08-23 19:27:29.184  INFO 70244 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : [] Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-23 19:27:29.258 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] HTTP POST http://localhost:9411/api/v2/spans
2025-08-23 19:27:29.259 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Accept=[application/json, application/*+json]
2025-08-23 19:27:29.259 DEBUG 70244 --- [/api/v2/spans}}] o.s.web.client.RestTemplate              : [] Writing [[B@e8a7685] as "application/json"
